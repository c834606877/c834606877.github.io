<!DOCTYPE html>
<html lang="zh_cn" >
  <head>
    <title>IzIy's Files - MyPress - MyPre.Cn</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="keywords" content="LanBing, MyPress, iziy, iziyix" />
    <meta name="description" content="这里是Iziy蓝冰的个人博客MyPress，记录着Iziy蓝冰的生活点滴。" />

    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />

  <!--Font awesome-->
  <link href="/assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">

  <!-- The Iziy main css -->
  <!-- <link rel="stylesheet" href="/assets/style.css"> -->
  <link rel="stylesheet" href="/assets/style.css">

  <!--[if lt IE 9]>
  <script src="https://cdn.bootcss.com/html5shiv/3.7.2/html5shiv-printshiv.js"></script>
  <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
  <![endif]-->
  <link rel="alternate" type="application/rss+xml" title="IzIy's Files - MyPress - MyPre.Cn" href="https://mypre.cn/feed.xml" />
</head>

<body class="nav-open">
  <script type="text/javascript">
  if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){
    document.write('<div id="mobile-nav" class="f12 yahei">');
    document.write('<ul class="nav">');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/">Home</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/audios/">音乐</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/photos/">相册</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/about/">联系</a>');
    document.write('    </li>');
    document.write('</ul>');
    document.write('</div>');
  }
  </script>
  <div id="wrap">
    <div id="preheader">一个人的角落,也许并没人会看到这里~~ anyway, 祝福你,工作顺心,学习快乐~</div>
      <header id="header" class="clearfix">
        <div class="head">
          <h1><a href="https://mypre.cn/">IzIy's Files</a></h1>
          <p class="desc yahei"><span>从明天起,做一个幸福的人, 喂马、劈柴、周游世界。 ---Iziy 蓝冰   </span></p>
        </div>
        <script type="text/javascript">
//"mqqbrowser|operamobi|juc|iuc|fennec|ios|applewebKit/420|applewebkit/525|applewebkit/532|ipad|iphone|ipaq|ipod|iemobile|windows ce|240x320|480x640|acer|android|anywhereyougo.com|asus|audio|blackberry|blazer|coolpad|dopod|etouch|hitachi|htc|huawei|jbrowser|lenovo|lg|lg-|lge-|lge|mobi|moto|nokia|phone|samsung|sony|symbian|tablet|tianyu|wap|xda|xde|zte"
if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){
  document.write('<a href="javascript:;" class="open-nav icon-list"><i class="fa fa-bars"></i></a>');
}
else
{
	document.write('<nav id="main-nav" class="clearfix yahei">');
    document.write('<ul class="nav">');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/">主页</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/audios/">音乐</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/photos/">相册</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/about/">联系</a>');
    document.write('    </li>');

    document.write('</ul>');
    document.write('</nav>');
}
</script>

        <div id="announcement">
          <a href="#" class="openpre close" title="Announcement"><i class="fa fa-star"></i></a>
        </div>
      </header>
      <div id="container" class="clearfix">
          <div id="content">
  <div class="home blog">
    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme" title="Change Gnome Shell theme after ubuntu upgraded to 1710" rel="bookmark">Change Gnome Shell theme after ubuntu upgraded to 1710</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-29</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>由于Ubuntu非LTS版，官方维护周期为9个月，遂更新了Ubuntu从17.04到17.10。</p>

<p>然而更新之后Gnome的桌面管理器（GDM），主题被修改成了类Ubuntu风格橘红色。</p>

<p>这种奇葩的风格，也许只有Ubuntu的创始者们才喜欢吧。</p>

<p>最初想法是寻找到gnome-look上找到原版gdm主题，果然发现了很多好看的主题，类XP，类WIN789，类osx。但花虽美，却不是我想要的。</p>

<p>随着google一通之后，发现解决方案也简单，</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo update-alternatives --config gdm3.css
There are 2 choices <span class="k">for </span>the alternative gdm3.css <span class="o">(</span>providing /usr/share/gnome-shell/theme/gdm3.css<span class="o">)</span>.

  Selection    Path                                          Priority   Status
------------------------------------------------------------
<span class="k">*</span> 0            /usr/share/gnome-shell/theme/ubuntu.css        10        auto mode
  1            /usr/share/gnome-shell/theme/gnome-shell.css   5         manual mode
  2            /usr/share/gnome-shell/theme/ubuntu.css        10        manual mode

Press &lt;enter&gt; to keep the current choice[<span class="k">*</span><span class="o">]</span>, or <span class="nb">type </span>selection number:
</code></pre></div>

<p>GDM在<code class="highlighter-rouge">/etc/alternatives/</code>目录下有设置了一些可选项，其中就包括了控制gnome-shell主题的配置选项，而更新的Ubuntu只是新增了该选项，并增加了优先级。</p>

<p>如此，可以比较方便的通过<code class="highlighter-rouge">update-alternatives</code>命令来修改gdm主题了。</p>

<p>参考</p>

<blockquote>
  <p><a href="https://didrocks.fr/2017/09/11/ubuntu-gnome-shell-in-artful-day-11/">Ubuntu GNOME Shell in Artful: Day 11</a></p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-audio">
  <div class="entry-music">
    <!-- songid="
" -->
  	<div class="sb-xiami"  songid="188489" song_s="wy" song_n="风继续吹（Live）" >
  		<div class="sb-player">
  			<div class="sb-cover"></div>
  			<div class="sb-info clearfix">
  				<div class="sb-title left"></div>
  				<div class="play-timer right">--:--</div>
  			</div>
  			<div class="play-button"> </div>
  			<div class="play-prosess">
  				<div class="play-prosess-bar"></div>
  			</div>
  		</div>
  		<div class="sb-jplayer"></div>
  	</div>
  </div>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips" title="北理研究生CTF Reverse 之 mips" rel="bookmark">北理研究生CTF Reverse 之 mips</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-12-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这次北理面向在读研究生举办CTF大赛，直接线下赛，时长12小时，其中选择填空1小时，关卡题2小时（之后加时2小时），9小时攻防，攻防赛题在先知安全有提到。</p>

<p>由于第一届，邀请的学校队伍属于中等偏下水平。最后，24支队伍只有9个分数为正，另有近一半左右队伍线下攻防没有拿分。</p>

<p>主办方声称原则上不提供外网环境。</p>

<p>逆向题只有一道，而且为mips架构第一次遇到。手上没有运行环境，只能静态调，花了一个多小时才搞清楚流程，之后时间不够只能做罢，后来发现当场也没有人做出。</p>

<p>赛后再分析一遍其实还是挺简单的。</p>

<p>先附上解密代码，回舍，日后有时间再补。</p>

<p>程序： <a href="/post_res/ctf_bit_wp/mips">mips</a></p>

<p><img src="/post_res/ctf_bit_wp/bit-ctf-reverse-mips-1.png" alt="gdb-reverse-key" /></p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
</span>

<span class="kt">void</span> <span class="nf">dec</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">val</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">delta</span> <span class="o">=</span> <span class="mh">0x9e3779B9</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sum</span> <span class="o">=</span> <span class="mh">0xb8ab04e8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">v0</span><span class="o">=</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">v1</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v0</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v0</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v0</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[(</span><span class="n">sum</span> <span class="o">&gt;&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
		<span class="n">sum</span> <span class="o">-=</span> <span class="n">delta</span><span class="p">;</span>
		<span class="n">v0</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v1</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v1</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="n">sum</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"0x%x~~~</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v0</span><span class="p">;</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v1</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x2bc12411</span><span class="p">,</span> <span class="mh">0x0deadbee</span><span class="p">,</span> <span class="mh">0x0276630b</span><span class="p">,</span> <span class="mh">0x014f53f5</span>
		<span class="p">};</span>
	<span class="kt">uint32_t</span> <span class="n">value</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x9a5e3731</span><span class="p">,</span> <span class="mh">0x2ed28785</span><span class="p">,</span>
		<span class="mh">0xeb26da7d</span><span class="p">,</span> <span class="mh">0x82b06241</span><span class="p">,</span>
		<span class="mh">0x21d9dcd4</span><span class="p">,</span> <span class="mh">0x44bdda49</span><span class="p">,</span>
		<span class="mh">0x15f62308</span><span class="p">,</span> <span class="mh">0x7b0546ee</span><span class="p">,</span>
		<span class="mh">0xf6b4a519</span><span class="p">,</span> <span class="mh">0x71c0d531</span>
		<span class="p">};</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">key</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="c1">//printf("0x%8x, 0x%8x\n", value[0], value[1]);
</span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	
<span class="p">}</span>

</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound" title="Linux Sound Server" rel="bookmark">Linux Sound Server</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-20</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/20/archlinux-dwm-sound"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>ArchLinux下使用DWM有两个月了，但是声音模块一直是很大的问题。</p>

<p>一开始以为DELL Vsion3668的声卡驱动不同寻常，毕竟之前在Windows下的驱动就装了老费劲了。</p>

<p>之前CTF校赛加上嵌入式论文讨论班一阵忙活，空出时间继续搞ArchLinux，没有声音一直很难受。</p>

<p>查文档发现原来是pulseaudio没有启动，这是Linux下的声音Server。</p>

<p>Linux下的声音系统比较杂，现今多数使用ALSA;</p>

<p>ALSA是一个集成了声卡驱动和底层接口的东西，而pulseaudio是声音服务器，应用程序要想输出声音需要往pulseaudio里边送。</p>

<p>于是:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>vim ~/.xinitrc
</code></pre></div>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>pulseaudio --start
</code></pre></div>

<p>启动声间服务器。</p>

<p>参考：</p>
<blockquote>
  <p>https://wiki.archlinux.org/index.php/Sound_system
https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture</p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2" title="华师大CTF逆向题分析之Draw It（Monster）" rel="bookmark">华师大CTF逆向题分析之Draw It（Monster）</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-2"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h1 id="draw-itmonster">Draw It（Monster）</h1>

<p>程序打开运行界面：</p>

<p><img src="/post_res/ctf_wp/draw_it_1.png" alt="draw_it_1" /></p>

<p>查壳发现为UPX压缩壳，UPX壳代码是开源的，加壳脱壳是同一个程序。</p>

<p><img src="/post_res/ctf_wp/draw_it_2.png" alt="draw_it_2" /></p>

<p>手脱ESP定律，或者往下找popad接着一个大跳可以直接到程序OEP。
手脱比较节省时间，但是有一些区段或者其它信息没法还原。</p>

<p><img src="/post_res/ctf_wp/draw_it_3.png" alt="draw_it_3" /></p>

<p>脱壳之后用IDA分析来到程序消息处理函数找到关键位置：</p>

<p><img src="/post_res/ctf_wp/draw_it_4.png" alt="draw_it_4" /></p>

<p>通过分析，程序取所画图片的连续相同的点的个数与cmp数据做对比，
猜测cmp数据为Flag相关数据，存储了Flag图片的一些信息，即bitmap方式连续相同的点的个数。
因为位图是24位，每个像素点用3位来存储，所以比较的时候需要乘3。</p>

<p>导出数据：</p>

<p><img src="/post_res/ctf_wp/draw_it_5.png" alt="draw_it_5" /></p>

<p>进一步验证,将数据全部相加得到30000(50*600)，确定了之前的分析。</p>

<p>编写Win32程序，解析数据：</p>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cmp_i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">600</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">sum</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="k">if</span><span class="p">(</span>  <span class="n">odd</span> <span class="p">)</span>
				<span class="n">SetPixel</span><span class="p">(</span><span class="n">hdc</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="mi">50</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">RGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span><span class="c1">//BMP从上到下，从左到右存贮
</span>		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">odd</span> <span class="o">=</span> <span class="o">!</span><span class="n">odd</span><span class="p">;</span>
			<span class="n">all</span><span class="o">+=</span><span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">]</span> <span class="p">;</span>
			<span class="n">cmp_i</span><span class="o">++</span><span class="p">;</span>
			
		<span class="p">}</span>

	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div>

<p>可以得到结果：</p>

<p><img src="/post_res/ctf_wp/draw_it_6.png" alt="draw_it_6" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1" title="华师大CTF逆向题分析之巴黎解密" rel="bookmark">华师大CTF逆向题分析之巴黎解密</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-1"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>预赛逆向题有三道
第一道为巴黎解密ctf文件
第二道为画出FLAG
第三道为Stephen</p>

<p>决赛逆向题有四道，只做出了前两题。
第一题为MFC程序跑不起来
第二道为Elf64、STL对素数表加密
第三道使用 VirtualProtect 反调试。
第四道使用了一个linux程序对数据进行封装，没时间做。
前两道相对简单</p>

<h3 id="巴黎解密ctf文件">巴黎解密ctf文件</h3>

<blockquote>
  <p>有个文件加密工具，能将一个文件加密到一个.ctf文件中去。</p>

  <p>有一个犯罪分子将存有犯罪记录的一个名为“CTFtest.ctf”
的加密文件被删除了。现经过数据恢复，我们已经恢复了该文件。</p>

  <p>但是很不幸，该文件头部的部分数据已经被覆盖掉了。这个.ctf文件已经不能正常打开了。
而且加密该文件的口令，犯罪分子也不愿意交代，我们只知道他惯用的口令是一个8位纯数字口令。</p>

  <p>请选手下载http://ctf.ecnu.edu.cn/question/attachment1.zip</p>

  <p>通过其中的.ctf文件以及解密程序最大限度地恢复出文件中的内容，flag就在里面。
Flag形式为大写32位md5。</p>
</blockquote>

<p>题目给出了一个解密程序以及一个加密后丢失了一部分文件头的文件</p>

<p>如图：</p>

<p><img src="/post_res/ctf_wp/final_re_1.png" alt="final_re_1" /></p>

<p>目测丢失了前35bytes的数据</p>

<p>解密程序无壳无花，直接IDA，MFC静态库编译。</p>

<p>结合导入表以及程序运行来看，调用了CreateFile、ReadFile、MessageBox等参数，</p>

<p>顺利跟踪到了程序关键地址 0x402570
分析函数，局部变量比较多，</p>

<p><img src="/post_res/ctf_wp/final_re_2.png" alt="final_re_2" /></p>

<p>应该八九不十了。
接着分析：</p>

<p><img src="/post_res/ctf_wp/final_re_3.png" alt="final_re_3" /></p>

<p>程序打开文件，判断前4 bytes 内容为 0x33465443 转换为字符<code class="highlighter-rouge">CTF3</code></p>

<p><img src="/post_res/ctf_wp/final_re_4.jpg" alt="final_re_4" /></p>

<p>接着读4bytes转为DWORD型，为接下来要读取的长度并存储。
接着读文件16字节，取密码框内容，
将密码进行两次MD5加密，将结果与取到的16字节进行对比。</p>

<p><img src="/post_res/ctf_wp/final_re_5.png" alt="final_re_5" /></p>

<p>接着读4bytes转为DWORD型，做为接下来要读取的长度，再次读取，然后关闭文件。</p>

<p>至此，加密文件全部读取完毕，小结一下文件结构：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>4 bytes 为固定字符‘CTF3’
4 bytes 为len of head
{...}   为head
16 bytes 将密码经两次MD5加密的密文
4 bytes 为len of body
{...}   为body
</code></pre></div>

<p>此时回过头来分析.ctf加密文件内容。</p>

<p><img src="/post_res/ctf_wp/final_re_6.png" alt="final_re_6" /></p>

<p>发现偏移为0x29位置4bytes的内容为0x0000619C，这一部分正好对应为文件此后的长度，
可以推定为<code class="highlighter-rouge">len_of_body</code>存储位置。向前16bytes为MD5密文区域，并且只有6bytes保留。</p>

<p>根据提示，密码为8位数字，通过这一部分MD5，应该可以还原。
编写程序：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include "md5.h"
</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0x48</span><span class="p">,</span>  <span class="mh">0xB1</span><span class="p">,</span>  <span class="mh">0xED</span><span class="p">,</span>  <span class="mh">0x05</span><span class="p">,</span>  <span class="mh">0x8D</span><span class="p">,</span>  <span class="mh">0xF7</span> <span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">a</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">c</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

	<span class="k">for</span><span class="p">(</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">99999999</span><span class="p">;</span> <span class="n">num</span><span class="o">++</span><span class="p">){</span>
		<span class="n">_itoa</span><span class="p">(</span><span class="n">num</span><span class="p">,(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
		<span class="n">MD5_CTX</span> <span class="n">md5</span><span class="p">;</span>

		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">));</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
		
		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>

		<span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		<span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">i</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">l</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nl">l:</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"pause"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div>

<p>程序跑出密码为<code class="highlighter-rouge">20160610</code>。
此时还剩11bytes的head内容不知道。</p>

<p><img src="/post_res/ctf_wp/final_re_7.png" alt="final_re_7" /></p>

<p>接着查找程序对head部分的引用，发现程序对head沁使用多字节字符转宽字符库函数。
进行字符串拼接之后，传入CreateFile。
由此可以断定，head部分内容为加密文件的文件名。</p>

<p>至此我们可以对加密文件的分析，基本结束，将文件头丢失部分恢复，Head部分随便指定一个文件名。
解密程序将文件恢复：</p>

<p><img src="/post_res/ctf_wp/final_re_8.jpg" alt="final_re_8" /></p>

<p>得到一个压缩包文件，查看内容为Word文件，打开得到Flag。</p>

<p><img src="/post_res/ctf_wp/final_re_9.jpg" alt="final_re_9" /></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1">Read More</a>
    </div>
  </footer>
</article>


    
      <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


    
    
        <div class="pagination clearfix">
            
            
            
            
            
            
                
                  <a class="active current">1</a>
                
            
                
                  <a href="https://mypre.cn/page2">2</a>
                
            
                
                  <a href="https://mypre.cn/page3">3</a>
                
            
                
                  <a href="https://mypre.cn/page4">4</a>
                
            
                
                  <a href="https://mypre.cn/page5">5</a>
                
            
                
                  <a href="https://mypre.cn/page6">6</a>
                
            

            
                  <a href="https://mypre.cn/page2/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
            
        </div><!-- /.pagination -->
    
  </div><!-- /.div.home blog -->
</div><!-- ./content -->
<div id="sidebar">
  <aside id="mzw_admin-2" class="widget mzw_admin">
    <img src="https://mypre.cn/assets/images/bg_small.jpg">
    <div class="author-body">
        <div class="author_img">
            <img src="/assets/images/2.gif" alt="Lan Bing"/>
        </div>
        <div class="author_bio">
            <h3>Lan Bing </h3>
            <p class="muted">我很严肃的！ </p>
        </div>
    </div>

    <div class="social">
        
            <a class="weibo" target="_blank" href="http://weibo.com/u/2717952951" target="_blank"><i class="fa fa-weibo"></i></a>
        
            <a class="tweibo" target="_blank" href="http://t.qq.com/c834606877" target="_blank"><i class="fa fa-tencent-weibo"></i></a>
        
            <a class="github" target="_blank" href="https://github.com/c834606877" target="_blank"><i class="fa fa-github"></i></a>
        
            <a class="mail" target="_blank" href="mailto://c834606877@qq.com" target="_blank"><i class="fa fa-envelope"></i></a>
        
            <a class="rss" target="_blank" href="/feed.xml" target="_blank"><i class="fa fa-rss"></i></a>
        
       
    </div>
</aside>
  <aside id="sidebar-audio1" class="widget widget-audio">
    <div class="sb-xiami" songid="186820" song_s="wy" song_n="路过蜻蜓">
        <div class="sb-player">
            <div class="sb-cover"></div>
            <div class="sb-info clearfix">
                <div class="sb-title left"></div>
                <div class="play-timer right">--:--</div>
            </div>
            <div class="play-button"> </div>
            <div class="play-prosess">
                <div class="play-prosess-bar"></div>
            </div>
        </div>
        <div class="sb-jplayer"></div>
    </div>
    <script type="text/javascript">
        setTimeout(function(){$(".widget .sb-jplayer").jPlayer("play");},2000);
    </script>
</aside>
  <!-- sidebar:category list -->
<aside id="mzw_siderbar_categories" class="widget widget_mzw_siderbar_categories">
    <h3 class="widget-title"><span>分类列表</span></h3>
        <ul>
          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/本博动态/">
                  本博动态&nbsp;<span class="count">[5]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/生活随笔/">
                  生活随笔&nbsp;<span class="count">[12]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/三国演义/">
                  三国演义&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/业界新闻/">
                  业界新闻&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/系统技巧/">
                  系统技巧&nbsp;<span class="count">[2]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/未分类/">
                  未分类&nbsp;<span class="count">[5]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/心情日记/">
                  心情日记&nbsp;<span class="count">[19]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/学习生涯/">
                  学习生涯&nbsp;<span class="count">[3]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/影视音乐/">
                  影视音乐&nbsp;<span class="count">[5]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/Linux就是这个范儿/">
                  Linux就是这个范儿&nbsp;<span class="count">[24]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/最新下载/">
                  最新下载&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/应用技巧/">
                  应用技巧&nbsp;<span class="count">[8]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/Linux系统/">
                  Linux系统&nbsp;<span class="count">[15]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/网络应用/">
                  网络应用&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/jekyll/">
                  jekyll&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/MCU/">
                  MCU&nbsp;<span class="count">[6]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/考研心得/">
                  考研心得&nbsp;<span class="count">[2]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/数据结构算法/">
                  数据结构算法&nbsp;<span class="count">[3]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/Android/">
                  Android&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/Linux/">
                  Linux&nbsp;<span class="count">[5]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/GTK/">
                  GTK&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/STM32/">
                  STM32&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/linux系统/">
                  linux系统&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/ibus/">
                  ibus&nbsp;<span class="count">[1]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/MSP432/">
                  MSP432&nbsp;<span class="count">[4]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/CTF/">
                  CTF&nbsp;<span class="count">[3]</span>
              </a>
          </li>

          
          <li>
              <a class="catelink" href="https://mypre.cn/categories/逆向/">
                  逆向&nbsp;<span class="count">[3]</span>
              </a>
          </li>

          
        </ul>
</aside>
  <!-- sidebar: tag list -->
<aside id="mzw_siderbar_tags-3" class="widget widget_mzw_siderbar_tags">
    <h3 class="widget-title"><hanla></hanla><span>标签云</span></h3>
    <div class="tagcloud">
        <!-- <a href="http://lbing.sinaapp.com/archives/tag/%e6%a0%87%e7%ad%be1">标签<hanla></hanla>1</a> -->
        
            <a class="taglink" href="https://mypre.cn/tag/#test" data-target-cate="#test">
                test
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#标签1" data-target-cate="#标签1">
                标签1
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#jekyll" data-target-cate="#jekyll">
                jekyll
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MyPress" data-target-cate="#MyPress">
                MyPress
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Mypre.cn" data-target-cate="#Mypre.cn">
                Mypre.cn
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#iziy" data-target-cate="#iziy">
                iziy
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#nautilus" data-target-cate="#nautilus">
                nautilus
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#机械键盘，背光，Scroll开关，" data-target-cate="#机械键盘，背光，Scroll开关，">
                机械键盘，背光，Scroll开关，
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#心情日记，生活随笔" data-target-cate="#心情日记，生活随笔">
                心情日记，生活随笔
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#grub，os-prober" data-target-cate="#grub，os-prober">
                grub，os-prober
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#windows" data-target-cate="#windows">
                windows
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux系统" data-target-cate="#Linux系统">
                Linux系统
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Fedora" data-target-cate="#Fedora">
                Fedora
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#心情日记，考研心得" data-target-cate="#心情日记，考研心得">
                心情日记，考研心得
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#数据结构算法，动态规划" data-target-cate="#数据结构算法，动态规划">
                数据结构算法，动态规划
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Android第三方ROM二次开发重新打包" data-target-cate="#Android第三方ROM二次开发重新打包">
                Android第三方ROM二次开发重新打包
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux，DWM" data-target-cate="#Linux，DWM">
                Linux，DWM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux，GTK Theme" data-target-cate="#Linux，GTK Theme">
                Linux，GTK Theme
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#客制化机械键盘" data-target-cate="#客制化机械键盘">
                客制化机械键盘
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#机械键盘主控器" data-target-cate="#机械键盘主控器">
                机械键盘主控器
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#更新ibus输入法词库" data-target-cate="#更新ibus输入法词库">
                更新ibus输入法词库
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MCU，MSP432，GPIO" data-target-cate="#MCU，MSP432，GPIO">
                MCU，MSP432，GPIO
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MCU" data-target-cate="#MCU">
                MCU
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MSP432" data-target-cate="#MSP432">
                MSP432
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Timer_A" data-target-cate="#Timer_A">
                Timer_A
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#PWM" data-target-cate="#PWM">
                PWM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#UART" data-target-cate="#UART">
                UART
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#串口通信" data-target-cate="#串口通信">
                串口通信
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Graphic" data-target-cate="#Graphic">
                Graphic
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#library" data-target-cate="#library">
                library
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#grlib" data-target-cate="#grlib">
                grlib
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#ECNU" data-target-cate="#ECNU">
                ECNU
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#CTF" data-target-cate="#CTF">
                CTF
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#逆向" data-target-cate="#逆向">
                逆向
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#ArchLinux" data-target-cate="#ArchLinux">
                ArchLinux
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#BIT" data-target-cate="#BIT">
                BIT
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Reverse" data-target-cate="#Reverse">
                Reverse
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux" data-target-cate="#Linux">
                Linux
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Ubuntu" data-target-cate="#Ubuntu">
                Ubuntu
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#zesty" data-target-cate="#zesty">
                zesty
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#apt" data-target-cate="#apt">
                apt
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#release" data-target-cate="#release">
                release
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Ubuntu，Gnome" data-target-cate="#Ubuntu，Gnome">
                Ubuntu，Gnome
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#GDM" data-target-cate="#GDM">
                GDM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Theme" data-target-cate="#Theme">
                Theme
            </a>
        
    </div>
</aside>
</div><!-- ./sidebar -->
      </div><!-- ./container -->

    <footer id="footer" class="yahei clearfix">
	<p class="right">Copyright © 2014 <a href="https://mypre.cn" >IzIy's Files - MyPress - MyPre.Cn</a> Powered By <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
	<p class="left"></p>
</footer>
  </div><!--./warp-->

  <img id="qrimg" src="http://qr.liantu.com/api.php?text=https://mypre.cn/"/>
  <a id="qr" href="javascript:;"><i class="fa fa-qrcode"></i></a>
  <a id="gotop" href="javascript:;"><i class="fa fa-arrow-up"></i></a>
  <!--the js include-->
<!-- <script src="/assets/vendor/jquery/jquery.min.js"></script>
 -->


<script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://lib.sinaapp.com/js/jquery.migrate/1.2.1/jquery-migrate-1.2.1.min.js"></script>
<script src="https://cdn.staticfile.org/flexslider/2.2.0/jquery.flexslider-min.js"></script>

<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/assets/script/slimbox2.min.js"></script>
<script src="/assets/script/jquery.jplayer.min.js"></script>
<script src="/assets/script/prettify.js"></script>

<script type="text/javascript">
	var ajax = {
		'home': 'https://mypre.cn'
	}
	var asr_1 = 1;
	var asr_2 = 2;

/*
	$('.entry-content pre').addClass('prettyprint linenums');
	$('.entry-content code').addClass('prettyprint');
	prettyPrint();*/

</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


<script src="/assets/script/global.js"></script>
<script src="/assets/script/ajax.js"></script>



<!--
  the site comment script
-->





  <script src="/assets/script/commento.js"></script>
<script>
window.onload = function() {
    Commento.init({
        //serverUrl: "http://free_comment.mypre.cn",
        serverUrl: "http://free_comment.mypre.cn"
    });
}
</script>



<!--
  the site analysis script
-->

  <!-- baidu analysis -->
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?c18ce105288bdc61337b1ff23ee5cf52";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>




</body>
</html>
