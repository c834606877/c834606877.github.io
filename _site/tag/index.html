<!DOCTYPE html>
<html lang="zh_cn" >
  <head>
    <title>首页 - 第  页 - IzIy's Files - MyPress - MyPre.Cn</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="keywords" content="LanBing, MyPress, iziy, iziyix" />
    <meta name="description" content="这里是Iziy蓝冰的个人博客MyPress，记录着Iziy蓝冰的生活点滴。" />

    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />

  <!--Font awesome-->
  <link href="/assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet">

  <!-- The Iziy main css -->
  <!-- <link rel="stylesheet" href="/assets/style.css"> -->
  <link rel="stylesheet" href="/assets/style.css">

  <!--[if lt IE 9]>
  <script src="https://cdn.bootcss.com/html5shiv/3.7.2/html5shiv-printshiv.js"></script>
  <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.js"></script>
  <![endif]-->
  <link rel="alternate" type="application/rss+xml" title="IzIy's Files - MyPress - MyPre.Cn" href="https://mypre.cn/feed.xml" />
</head>

<body class="nav-open">
  <script type="text/javascript">
  if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){
    document.write('<div id="mobile-nav" class="f12 yahei">');
    document.write('<ul class="nav">');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/">Home</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/audios/">音乐</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/photos/">相册</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/about/">联系</a>');
    document.write('    </li>');
    document.write('</ul>');
    document.write('</div>');
  }
  </script>
  <div id="wrap">
    <div id="preheader">一个人的角落,也许并没人会看到这里~~ anyway, 祝福你,工作顺心,学习快乐~</div>
      <header id="header" class="clearfix">
        <div class="head">
          <h1><a href="https://mypre.cn/">IzIy's Files</a></h1>
          <p class="desc yahei"><span>从明天起,做一个幸福的人, 喂马、劈柴、周游世界。 ---Iziy 蓝冰   </span></p>
        </div>
        <script type="text/javascript">
//"mqqbrowser|operamobi|juc|iuc|fennec|ios|applewebKit/420|applewebkit/525|applewebkit/532|ipad|iphone|ipaq|ipod|iemobile|windows ce|240x320|480x640|acer|android|anywhereyougo.com|asus|audio|blackberry|blazer|coolpad|dopod|etouch|hitachi|htc|huawei|jbrowser|lenovo|lg|lg-|lge-|lge|mobi|moto|nokia|phone|samsung|sony|symbian|tablet|tianyu|wap|xda|xde|zte"
if(navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)){
  document.write('<a href="javascript:;" class="open-nav icon-list"><i class="fa fa-bars"></i></a>');
}
else
{
	document.write('<nav id="main-nav" class="clearfix yahei">');
    document.write('<ul class="nav">');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/">主页</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/audios/">音乐</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/photos/">相册</a>');
    document.write('    </li>');
    document.write('    <li class="active">');
    document.write('        <a href="https://mypre.cn/about/">联系</a>');
    document.write('    </li>');

    document.write('</ul>');
    document.write('</nav>');
}
</script>

        <div id="announcement">
          <a href="#" class="openpre close" title="Announcement"><i class="fa fa-star"></i></a>
        </div>
      </header>
      <div id="container" class="clearfix">
          <div id="content">
    
      <div class="box archive-meta" id="test">
        <h3 class="title-meta">Tag "test":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2012/05/01/test" title="测试" rel="bookmark">测试</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2012-05-01</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2012/05/01/test#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2012/05/01/test"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p style="text-align: center;">测试<a href="http://192.168.194.129/wp/uploads/2012/05/XP.jpg"><img class="wp-image-36 aligncenter" title="XP" src="http://192.168.194.129/wp/uploads/2012/05/XP-300x181.jpg" alt="" width="300" height="181" /></a></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2012/05/01/test">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="标签1">
        <h3 class="title-meta">Tag "标签1":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/03/20/bash-e5-bf-ab-e6-8d-b7-e9-94-ae-e8-ae-b0-e5-bd-95-e5-a4-87-e5-bf-98" title="Bash快捷键 记录备忘" rel="bookmark">Bash快捷键 记录备忘</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-03-20</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/应用技巧">应用技巧</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/03/20/bash-e5-bf-ab-e6-8d-b7-e9-94-ae-e8-ae-b0-e5-bd-95-e5-a4-87-e5-bf-98#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/03/20/bash-e5-bf-ab-e6-8d-b7-e9-94-ae-e8-ae-b0-e5-bd-95-e5-a4-87-e5-bf-98"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <blockquote><p><strong>生活在 Bash Shell 中，熟记以下快捷键，将极大的提高你的命令行操作效率。 </strong></p></blockquote>
<h3>编辑命令</h3>
<ul>
<li>Ctrl + a ：移到命令行首</li>
<li>Ctrl + e ：移到命令行尾</li>
<li>Ctrl + f ：按字符前移（右向）</li>
<li>Ctrl + b ：按字符后移（左向）</li>
<li>Alt + f ：按单词前移（右向）</li>
<li>Alt + b ：按单词后移（左向）</li>
<li>Ctrl + xx：在命令行首和光标之间移动</li>
<li>Ctrl + u ：从光标处删除至命令行首</li>
<li>Ctrl + k ：从光标处删除至命令行尾</li>
<li>Ctrl + w ：从光标处删除至字首</li>
<li>Alt + d ：从光标处删除至字尾</li>
<li>Ctrl + d ：删除光标处的字符</li>
<li>Ctrl + h ：删除光标前的字符</li>
<li>Ctrl + y ：粘贴至光标后</li>
<li>Alt + c ：从光标处更改为首字母大写的单词</li>
<li>Alt + u ：从光标处更改为全部大写的单词</li>
<li>Alt + l ：从光标处更改为全部小写的单词</li>
<li>Ctrl + t ：交换光标处和之前的字符</li>
<li>Alt + t ：交换光标处和之前的单词</li>
<li>Alt + Backspace：与 Ctrl + w 相同类似，分隔符有些差别 [感谢 rezilla 指正]</li>
</ul>




          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/03/20/bash-e5-bf-ab-e6-8d-b7-e9-94-ae-e8-ae-b0-e5-bd-95-e5-a4-87-e5-bf-98">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="jekyll">
        <h3 class="title-meta">Tag "jekyll":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem" title="The Fourth Day, fix some small bugs" rel="bookmark">The Fourth Day, fix some small bugs</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-12</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h3 id="第四天">第四天</h3>

<p>修改了Blog一些细节，还修补一些代码逻辑Bug，
Jplayer 循环播放页面音乐，
Sidebar滚动固定box 单个box
附着在jquery元素里边的对象在使用 jquery.clone 时，对象并不会clone，
导致jplayer fixed box 里边的元素按钮没有反应，</p>

<p>另外 Gallery.html 下竟然在输出内容时还有使用 <code>{{content}}</code>的，
忘记了 <code>{{content}}</code> 和 <code>{{content}}</code>的使用了</p>

<p>之前由于没有分清 这两变量，导致 内容，死循环 输出，或者无内容输出，花了一个多小时，</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll" title="Move To My New 'Stitac' Blog and New Domain MyPre" rel="bookmark">Move To My New 'Stitac' Blog and New Domain MyPre</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>博客优化的还不错了，增加了一些页面，音乐专辑，相册专辑，</p>

<p>这些功能一直想在Wordpress 上实现，但确一直没有实现</p>

<p>许是从来没有这么专注的去学一些东西吧，</p>

<p>也许 Wordpress 提供的各种HOOK及 函数 太多，太复杂了，远没有 Jekyll 来得这么 简单</p>

<p>yaml ＋ liquid 语法，与Jinja2 大同小异，甚至不需要写函数，几个模板，和 简单的输出处理逻辑就搞定了，</p>

<p>若是 有一个强大的 flask 作为 引擎 再配上Jinja 语法，这也决不会比Wordpress差吧～</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/10/jekyll-get-the-img-src-or-get-rid-img-tag" title="提取一篇文章里边的 图片链接，以及除去文章里边的 img 标签" rel="bookmark">提取一篇文章里边的 图片链接，以及除去文章里边的 img 标签</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-10</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/jekyll">jekyll</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/10/jekyll-get-the-img-src-or-get-rid-img-tag#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/10/jekyll-get-the-img-src-or-get-rid-img-tag"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>从接触 Jekyll 到现在有两整天了</p>

<p>发现 Jekyll 对逻辑处理方面不太善长，许是我没有认真去了解吧，</p>

<p>plugin 也许是很强大的东西 ， 虽然不会ruby，但是因为对python的熟悉，还是有很大的帮助的，</p>

<p>之后打算结合国内七牛CDN对资源加速，估计要用到 plugin 希望ruby的语法对新手的亲和度不会让我太失望。</p>

<p>因为 原主题支持不同类型的Post，所以 对Jekyll也想实现这个功能，</p>

<p>做 完了标准的Post 接下来该做 Gallery 了
碰到的问题是，该如何提取Post文章里边的 img 中的src 以及如何 去除 文章里边的img</p>

<p>因为要挪动IMG的位置到文章最前面</p>

<p>因此记下方法
去除 img 标签 如下：</p>

<pre>

{% for sp in content | split:"&lt;img "%}
    {% for con in sp | split:"&gt;" %}
        {% if con contains 'src="' or con contains "src='" %}
        {% else %}
          {% if con contains "href=" %}
            {{con}}&gt;
          {% else %}
            {{con}}
          {% endif %}
        {% endif %}
    {% endfor %}
{% endfor %}

</pre>

<p>去除 IMG 方法就是 按 <img 以及="" /> 切割 除去 含有 src 属性的 项 
剩下的 对 因为 &gt; 切割 破坏的a 标签 补上 &gt;</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/10/jekyll-get-the-img-src-or-get-rid-img-tag">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="MyPress">
        <h3 class="title-meta">Tag "MyPress":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem" title="The Fourth Day, fix some small bugs" rel="bookmark">The Fourth Day, fix some small bugs</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-12</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h3 id="第四天">第四天</h3>

<p>修改了Blog一些细节，还修补一些代码逻辑Bug，
Jplayer 循环播放页面音乐，
Sidebar滚动固定box 单个box
附着在jquery元素里边的对象在使用 jquery.clone 时，对象并不会clone，
导致jplayer fixed box 里边的元素按钮没有反应，</p>

<p>另外 Gallery.html 下竟然在输出内容时还有使用 <code>{{content}}</code>的，
忘记了 <code>{{content}}</code> 和 <code>{{content}}</code>的使用了</p>

<p>之前由于没有分清 这两变量，导致 内容，死循环 输出，或者无内容输出，花了一个多小时，</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll" title="Move To My New 'Stitac' Blog and New Domain MyPre" rel="bookmark">Move To My New 'Stitac' Blog and New Domain MyPre</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>博客优化的还不错了，增加了一些页面，音乐专辑，相册专辑，</p>

<p>这些功能一直想在Wordpress 上实现，但确一直没有实现</p>

<p>许是从来没有这么专注的去学一些东西吧，</p>

<p>也许 Wordpress 提供的各种HOOK及 函数 太多，太复杂了，远没有 Jekyll 来得这么 简单</p>

<p>yaml ＋ liquid 语法，与Jinja2 大同小异，甚至不需要写函数，几个模板，和 简单的输出处理逻辑就搞定了，</p>

<p>若是 有一个强大的 flask 作为 引擎 再配上Jinja 语法，这也决不会比Wordpress差吧～</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Mypre.cn">
        <h3 class="title-meta">Tag "Mypre.cn":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll" title="Move To My New 'Stitac' Blog and New Domain MyPre" rel="bookmark">Move To My New 'Stitac' Blog and New Domain MyPre</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>博客优化的还不错了，增加了一些页面，音乐专辑，相册专辑，</p>

<p>这些功能一直想在Wordpress 上实现，但确一直没有实现</p>

<p>许是从来没有这么专注的去学一些东西吧，</p>

<p>也许 Wordpress 提供的各种HOOK及 函数 太多，太复杂了，远没有 Jekyll 来得这么 简单</p>

<p>yaml ＋ liquid 语法，与Jinja2 大同小异，甚至不需要写函数，几个模板，和 简单的输出处理逻辑就搞定了，</p>

<p>若是 有一个强大的 flask 作为 引擎 再配上Jinja 语法，这也决不会比Wordpress差吧～</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/11/upgrade-my-blog-with-jekyll">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="iziy">
        <h3 class="title-meta">Tag "iziy":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem" title="The Fourth Day, fix some small bugs" rel="bookmark">The Fourth Day, fix some small bugs</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-12</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/本博动态">本博动态</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h3 id="第四天">第四天</h3>

<p>修改了Blog一些细节，还修补一些代码逻辑Bug，
Jplayer 循环播放页面音乐，
Sidebar滚动固定box 单个box
附着在jquery元素里边的对象在使用 jquery.clone 时，对象并不会clone，
导致jplayer fixed box 里边的元素按钮没有反应，</p>

<p>另外 Gallery.html 下竟然在输出内容时还有使用 <code>{{content}}</code>的，
忘记了 <code>{{content}}</code> 和 <code>{{content}}</code>的使用了</p>

<p>之前由于没有分清 这两变量，导致 内容，死循环 输出，或者无内容输出，花了一个多小时，</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/12/fourth-day-fix-some-smarll-problem">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="nautilus">
        <h3 class="title-meta">Tag "nautilus":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/04/14/open-here-in-terminal-from-nautilus" title="Open Here In Teminal From Nautilus" rel="bookmark">Open Here In Teminal From Nautilus</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-04-14</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/04/14/open-here-in-terminal-from-nautilus#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/04/14/open-here-in-terminal-from-nautilus"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>Linux 下的文件管理器 nautilus 可以很容易在终端中打开通过命令</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[lanbing@LanBing-Laptop ~]$ nautilus .
</code></pre></div>

<p>但是要想在 nautilus 中打开 Terminal 却很麻烦 于是google了一下 发现软件包：nautilus-open-terminal 功能如其名，果断：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[lanbing@localhost ~]$ sudo dnf search  nautilus-open-terminal
[sudo] password for lanbing: 
Last metadata expiration check performed 1 day, 5:43:29 ago on Wed Apr 13 14:49:06 2016.
===================== N/S Matched: nautilus-open-terminal ======================
nautilus-open-terminal.x86_64 : Nautilus extension for an open terminal shortcut
[lanbing@localhost ~]$ sudo dnf install nautilus-open-terminal -y
</code></pre></div>

<p>安装后在 文件管理器 中右键 即可 方便打开 Terminal 了</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/04/14/open-here-in-terminal-from-nautilus">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="机械键盘，背光，Scroll开关，">
        <h3 class="title-meta">Tag "机械键盘，背光，Scroll开关，":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/05/04/toggle-backlight-by-use-scroll" title="在Linux下 使用Scroll键开关键盘背光灯" rel="bookmark">在Linux下 使用Scroll键开关键盘背光灯</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-05-04</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/05/04/toggle-backlight-by-use-scroll#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/05/04/toggle-backlight-by-use-scroll"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>花了4天半的时间鼓捣好了一个机械键盘，</p>

<p>找了一个老外大牛写的stm32－based 键盘矩阵扫描器，改改装在了键盘上边</p>

<p>dfu功能，移植在keil下没有被识别，估计一阵子也没有多少时间来折腾，暂时先用着，</p>

<p>因为io口不够用，多区背光给改成了Scroll键开关，</p>

<p>但是，发现 Scroll 键 在高版本linux下给屏蔽了，</p>

<p>国内百度了半天没找到好的解决方案</p>

<p>转到google 发现
<a href="http://unix.stackexchange.com/questions/164245/why-is-the-scroll-lock-key-disabled-in-cinnamon-linux-xorg">Why is the Scroll Lock key disabled in Cinnamon/Linux/Xorg?</a>
一文给出了详细的方法</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/05/04/toggle-backlight-by-use-scroll">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="心情日记，生活随笔">
        <h3 class="title-meta">Tag "心情日记，生活随笔":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/08/summary-for-last-two-mouths" title="两个月没写东西了，总结一下这些天都做了些什么吧" rel="bookmark">两个月没写东西了，总结一下这些天都做了些什么吧</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/08/summary-for-last-two-mouths#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/08/summary-for-last-two-mouths"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>上一篇还是 6月的事了，6月20号开完毕业典礼，24号就回家了。那天下着大雨，每走一步，都希望留下些什么，但好像什么也没有留下。</p>

<p>原计划，两个月把Linux内核完全注解看懂，但由于Linux不熟悉和不了解386架构，一直在徘徊中前进。</p>

<p>一星期给机械键盘改键改灯</p>

<p>了解了Linux下X的工作机制。</p>

<p>把Fedora换成了Ubuntu 在Ubuntu下安装了Gnome，没然又将桌面换成了DWM。</p>

<p>CF给上海区，升到了大师6。</p>

<p>其它小事若干。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/08/summary-for-last-two-mouths">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/06/01/qingguanji-on-library" title="漂在天空的日子" rel="bookmark">漂在天空的日子</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-06-01</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/06/01/qingguanji-on-library#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/06/01/qingguanji-on-library"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>书馆故地新游，独隅花草小落，北望青峰断楼，未见杨柳依，但闻碧水重。</p>

<p>学末临行及路，旧友席宴繁出，肺腑轻言吐。旧人却去无，人道断肠初，哪堪肠已无。</p>

<p><img src="/post_res/qinguangji-on-library.jpeg" alt="秦观集" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/06/01/qingguanji-on-library">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/05/25/another-days-of-being-wild" title="启程" rel="bookmark">启程</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-05-25</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/05/25/another-days-of-being-wild#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/05/25/another-days-of-being-wild"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <ul>
  <li>当我穿上这身学士服的时候，依旧不敢相信我即将毕业。因为，这仍然是个启程。</li>
</ul>

<p><img src="/post_res/my-class-photo.jpeg" alt="毕业照" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/05/25/another-days-of-being-wild">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/05/19/note" title="游艾西湖畔" rel="bookmark">游艾西湖畔</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-05-19</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/05/19/note#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/05/19/note"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <ul>
  <li>拂晓，游艾西湖畔，寻忆，未见拾沙水，但闻落木花。</li>
</ul>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/05/19/note">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/04/21/days-of-being-wild" title="漂在天空的日子" rel="bookmark">漂在天空的日子</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-04-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/04/21/days-of-being-wild#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/04/21/days-of-being-wild"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <ul>
  <li>
    <p>你有没有听说过，这个世界上有一种鸟……</p>
  </li>
  <li>
    <p>听过啦，没脚的那种是嘛！这套哄女孩的可以啊，你像鸟吗?哪一寸像鸟啊?你只不是唐人街垃圾堆里捡回来的酒鬼。像鸟，你那要是会飞的话，会窝在这里么?飞呀，有本事飞给我看看啊！</p>
  </li>
  <li>
    <p>有机会的，不过到时候，你可不要自卑噢。</p>
  </li>
</ul>

<p><img src="/post_res/days-of-being-wild.jpg" alt="漂在天空的日子" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/04/21/days-of-being-wild">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/12/26/on-the-way-forever" title="On The Way, Forever~" rel="bookmark">On The Way, Forever~</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-12-26</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/12/26/on-the-way-forever#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/12/26/on-the-way-forever"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>一直都挂念着这个地方,想来写一点东西,然而……</p>

<p>也不知道以后会如何回忆这段的日子,</p>

<p>原以为一心考研,却只是想的太简单,</p>

<p>一直想着平静的生活,然而,自从那年高考结束之后,就已经不一样了,</p>

<p>那种一年两个长徦,除了周未每天都要去上课的时光,不需要自己去决定什么的日子早就再了,</p>

<h2 id="2016-12-26-清晨">2016-12-26 清晨</h2>
<p>当被不知道什么时候定好的闹钟惊醒的那一刻,仍然有一种莫名的冲动,结束了吗?结束了,就这样结束了.不知道多少个像这样的日日夜夜夜过去,不知道以后还会有多少个像这样的日日夜夜–我的心,仍在路上.</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/12/26/on-the-way-forever">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/07/08/keep-silence-until-2017" title="Keep Silence until 2017 Just like three half years ago" rel="bookmark">Keep Silence until 2017 Just like three half years ago</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-07-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/07/08/keep-silence-until-2017#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/07/08/keep-silence-until-2017"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>Keep Silence until 2017 just like three half years ago</p>

<p>server years ago, i got a dream to go to colege</p>

<p>now,i am going to a better colege.</p>

<p>Just like three half years ago, Be in Silence.</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/07/08/keep-silence-until-2017">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2016/05/13/sleep-diary" title="卧榻将息，辗转之思" rel="bookmark">卧榻将息，辗转之思</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2016-05-13</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/心情日记">心情日记</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2016/05/13/sleep-diary#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2016/05/13/sleep-diary"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p><img src="/post_res/abfaa40egx6BSi1xx0652&amp;690.jpg" alt="路漫漫" /></p>

<p>入学之期，焉已三年，</p>

<p>情情景景，历历在目，</p>

<p>浮心年华，酒醉酩酊，</p>

<p>学之习之，聚之散之，</p>

<p>絮事繁多，忙忙之为。</p>

<p>今轻年已去，清心求学，</p>

<p>一心一意，无欲它思，</p>

<p>竟不想今时何日。</p>

<p>忆往昔年，</p>

<p>高中之季，意气风发，</p>

<p>夙兴夜寐，进士及第，</p>

<p>时过境迁，期期三年。</p>

<p>今朝之举，黄金榜上，</p>

<p>既无愧于心，何须论得丧。</p>

<p>夜明风清，记之感慨。</p>

<p>——蓝记</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2016/05/13/sleep-diary">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="grub，os-prober">
        <h3 class="title-meta">Tag "grub，os-prober":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows" title="grub-mkconfig 没有Windows项" rel="bookmark">grub-mkconfig 没有Windows项</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-02-09</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
            <a href="https://mypre.cn/categories/应用技巧">应用技巧</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/02/09/grub-cannot-detect-windows"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>不知道什么时候开始,我的<code>grub2-mkconfig</code></p>

<p>找不到Windows的启动项了,
说严重也不严重,但小问题堆起来也会成为大问题的
于是乎,追根溯源,
Windows 项原本是在<code>/etc/grub.d/30_os-prober</code>生成</p>

<p>查看其代码,发现使用了<code>os-prober</code>寻找其他系统.
运行发现没有输出,可以确定是这个东西在抽风了</p>

<p>回头一想,之前由于部分主板EFI记动的时候,会检测是否存在<code>/EFI/Microsoft/Boot/bootmfgw.efi</code>,如果存在的话,会直接启动他,所以将其改名了.
将其改回再测试,os-prober可心正常找到Windows项了</p>

<p>于是乎,<code>os-prober</code>要改的话基本没戏,还是写脚本吧,</p>

<pre> vi /etc/grub.d/40_custom</pre>
<p>直接将启动项加入就行了.</p>

<p>关于 grub 请详见<a href="https://www.gnu.org/software/grub/manual/grub.html#">官方文档</a>!</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="windows">
        <h3 class="title-meta">Tag "windows":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows" title="grub-mkconfig 没有Windows项" rel="bookmark">grub-mkconfig 没有Windows项</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-02-09</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
            <a href="https://mypre.cn/categories/应用技巧">应用技巧</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/02/09/grub-cannot-detect-windows"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>不知道什么时候开始,我的<code>grub2-mkconfig</code></p>

<p>找不到Windows的启动项了,
说严重也不严重,但小问题堆起来也会成为大问题的
于是乎,追根溯源,
Windows 项原本是在<code>/etc/grub.d/30_os-prober</code>生成</p>

<p>查看其代码,发现使用了<code>os-prober</code>寻找其他系统.
运行发现没有输出,可以确定是这个东西在抽风了</p>

<p>回头一想,之前由于部分主板EFI记动的时候,会检测是否存在<code>/EFI/Microsoft/Boot/bootmfgw.efi</code>,如果存在的话,会直接启动他,所以将其改名了.
将其改回再测试,os-prober可心正常找到Windows项了</p>

<p>于是乎,<code>os-prober</code>要改的话基本没戏,还是写脚本吧,</p>

<pre> vi /etc/grub.d/40_custom</pre>
<p>直接将启动项加入就行了.</p>

<p>关于 grub 请详见<a href="https://www.gnu.org/software/grub/manual/grub.html#">官方文档</a>!</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/02/09/grub-cannot-detect-windows">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Linux系统">
        <h3 class="title-meta">Tag "Linux系统":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise" title="让 Grub2 记住上次选择的启动项" rel="bookmark">让 Grub2 记住上次选择的启动项</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-02-09</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
            <a href="https://mypre.cn/categories/系统技巧">系统技巧</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>linux 下可以碰到各种各样的问题,今天解决了一部分,明天也许又会冒出一些新的问题,
但是,更重要的是,fix it and remenber it!</p>

<p>linux 使用配置文件进行管理,其中gurb 的配置文件有, <code>/etc/default/grub</code>和<code>/etc/grub.d/</code></p>

<p>前者存储grub变量,后者为生成一个完整,grub.cfg配置的脚本,</p>

<p>此外,还有一个官方给的<code>/boot/grub2/grubenv</code></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Fedora">
        <h3 class="title-meta">Tag "Fedora":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise" title="让 Grub2 记住上次选择的启动项" rel="bookmark">让 Grub2 记住上次选择的启动项</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-02-09</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux系统">Linux系统</a>
          
            <a href="https://mypre.cn/categories/系统技巧">系统技巧</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>linux 下可以碰到各种各样的问题,今天解决了一部分,明天也许又会冒出一些新的问题,
但是,更重要的是,fix it and remenber it!</p>

<p>linux 使用配置文件进行管理,其中gurb 的配置文件有, <code>/etc/default/grub</code>和<code>/etc/grub.d/</code></p>

<p>前者存储grub变量,后者为生成一个完整,grub.cfg配置的脚本,</p>

<p>此外,还有一个官方给的<code>/boot/grub2/grubenv</code></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/02/09/grub-set-default-boot-last-choise">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="心情日记，考研心得">
        <h3 class="title-meta">Tag "心情日记，考研心得":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/04/08/csreview" title="考研日记" rel="bookmark">考研日记</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-04-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/考研心得">考研心得</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/04/08/csreview#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/04/08/csreview"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <blockquote>
  <p>这段大学最充实的日子，终于结束。回想起来，花人生的一小段时光去奋斗，升学，提升自己，是很有必要的。
那么，也同样恭喜看到篇帖子的人，也许你也选择了与我同样的道路，不论结果如何，这段日子，也将成为你大学时光最难忘的一刻。
至少，你将会在这个时候，学到：</p>
</blockquote>

<blockquote>
  <ul>
    <li>什么叫做坚持，一年如一日的坚持</li>
    <li>什么叫做认真，不放过任何一个知识点的认真</li>
    <li>什么叫做态度，对待自己人生前途的态度</li>
  </ul>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/04/08/csreview">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/02/22/the-path-to-graduate" title="考研日记" rel="bookmark">考研日记</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-02-22</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/生活随笔">生活随笔</a>
          
            <a href="https://mypre.cn/categories/考研心得">考研心得</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/02/22/the-path-to-graduate#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/02/22/the-path-to-graduate"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <blockquote>
  <p>如果已经决定要打一场战了的话，那么就做好充足的准备吧，</p>
</blockquote>

<p>随手日记，不忘青春，虽然其中也写了一些废话吧，回头细想，一路过来，也不失为人生中一段乐趣。虽无苦尽甘来之想，人生仍在路上呐。</p>

<hr />

<p>本着自由贡献的精神，
给某某某以及即将踏上2018年考研孩子们的一些经验吧，希望能有哪怕是一点点的帮助也好。</p>

<p>决定考研是一件比较艰难的事，要面临各种选择与得失、父母和老师们的期盼、为自己的前程的负责，</p>

<p>随着时间的推移，真正要面临这个选择了，</p>

<p>想着三年来一直生活在一个小圈子里边，班上几个同学，学校几个朋友，讨论的话题永远是哪个游戏好玩，新出了哪部电影，哪个人怎么样，肤浅的观点在小圈子里边传播，</p>

<p>过着象牙塔般的生活 好像世界就是这么安逸了。过完四年，连学校有哪些个专业,发生了什么大的事情都不知道。</p>

<p>想想毕业后就是另一番景象，没有学到什么真东西，在小公司里边摸爬滚打一辈子。
最后把自己的青春浪费在一般人走过的路上，我不甘心，于是。</p>

<p>在作出决定之前，也是一往反对考研的。然而，后来会发现， 这是一个正确的选择，
前提是，找到了一个合适的大学，</p>

<p>现在回想以前的对考研看法，甚至有些幼稚，</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/02/22/the-path-to-graduate">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="数据结构算法，动态规划">
        <h3 class="title-meta">Tag "数据结构算法，动态规划":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/03/13/longest-increasing-subsequence" title="动态规划-最长增长子序列" rel="bookmark">动态规划-最长增长子序列</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-03-13</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/数据结构算法">数据结构算法</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/03/13/longest-increasing-subsequence#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/03/13/longest-increasing-subsequence"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>最长递增子序列（LIS）的问题是要找到一个给定序列的最长子序列的长度，使得子序列中的所有元素被排序的顺序增加。</p>

<p>例如，{2,1,0,5,4,8,9} LIS为{2,4,8,9},{2,4,8,9},{1,5,8,9}….最长长度为4。</p>

<p>这里存在一个局部前后无关性的规律：</p>

<p>设 arr[0..m..m+1] 其中arr[0..m] 的最长子序列是包含于arr[0..m+1]的，且长度包含</p>

<p>所以，求arr[0..m]的最长子序列，只需要找出{ arr[0..m-i],其中m=&gt;i&gt;=1}的LIS，</p>

<p>此时，设{ arr[0..m-i],其中m=&gt;i&gt;=1}的最长子序列:i = k;</p>

<p>如果arr[k] &lt; arr[m]的话，则arr[m]的LIS长度为arr[0..k]的LIS长度+1；</p>

<p>LIS = LIS + arr[m];</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int arr[10] = 2;
int n = sizeof(arr) / sizeof(arr[0]);

//返回包含第n个元素作为最后一个元素的子序列的最长长度，
//a用于记录最长长度，
int lis(int n, int &amp;a)
{
    if(n == 1) return 1;
    int cmax = 0;
    for(int i = 1; i &lt; n; i++)
    {
        //第n个元素有可能不是LIS的最后一个元素,所以这里的递归不能放进if里面。
        int r = lis(i,a);
        if(arr[i-1]&lt;arr[n-1])
        {
            if(r &gt; cmax) cmax = r;
        }
    }
    a = max(a,cmax+1);
    return cmax + 1;
}
</code></pre></div>

<p>可以看到，每次lis(n)的执行都会调用n-1次lis，时间复杂度为O(n^2)，
下面进行优化：
方法与之前的背包问题和整分拆分问题非常相似。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>int arr[10] = 2;
int nSize = sizeof(arr) / sizeof(arr[0]);
int lis2(int nSize)
{
    int *c;
    c = (int *) malloc(sizeof(int)*nSize);
    c[0] = 1;

    int gmax=0;
    for(int n = 1; n &lt; nSize; n++ )
    {
        int cmax = 0;
        for ( int i = 0; i &lt; n; i++ )
        {
            if ( arr[i]&lt;arr[n] &amp;&amp; c[i]&gt;cmax ) 
                cmax = c[i];
        }
        c[n] = cmax + 1;

        if ( c[n] &gt; gmax ) gmax = c[n];
    }

    free( c );
    return gmax;
}
</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/03/13/longest-increasing-subsequence">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/03/12/integer-division" title="整数拆分" rel="bookmark">整数拆分</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-03-12</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/数据结构算法">数据结构算法</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/03/12/integer-division#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/03/12/integer-division"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>将一个整数拆分成2的幂相加，比如</p>

<table>
  <tbody>
    <tr>
      <td>7=1+2+4</td>
    </tr>
    <tr>
      <td>7=1+2+2+2</td>
    </tr>
    <tr>
      <td>7=1+1+1+4</td>
    </tr>
    <tr>
      <td>7=1+1+1+2+2</td>
    </tr>
    <tr>
      <td>7=1+1+1+1+1+2</td>
    </tr>
    <tr>
      <td>7=1+1+1+1+1+1+1</td>
    </tr>
  </tbody>
</table>

<p>4 = 4</p>

<p>4 = 2 + 2</p>

<p>4 = 1 + 1 + 2</p>

<p>4 = 1 + 1 + 1 + 1</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/03/12/integer-division">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/03/11/c-01bag-problem" title="01背包问题" rel="bookmark">01背包问题</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-03-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/数据结构算法">数据结构算法</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/03/11/c-01bag-problem#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/03/11/c-01bag-problem"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>恕在下愚钝，01背包问题学了两仨天才搞懂，其中也是断断续续了，</p>

<p>这个问题也是讲烂了的一个知识点，但是由于没有找到一个适合以自己的思维来理解的，所以现在总结一下</p>

<p>大家都说这是一个关于动态规划的问题，但在下才疏学浅，始终无法，理会这其中的关系，</p>

<p>唯一能联想到的就是高中的时候，学过的几何绘画动态规划了，特征是：给出限制条件，求最值。看来应该是这类题目了。</p>

<p>现在只考虑01背包的情况，至于动态规划的思想还要再接触几个相应的题目才能掌握。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/03/11/c-01bag-problem">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Android第三方ROM二次开发重新打包">
        <h3 class="title-meta">Tag "Android第三方ROM二次开发重新打包":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/04/26/how-repack-third-ROM" title="安卓7.x下重新打包第三方ROM" rel="bookmark">安卓7.x下重新打包第三方ROM</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-04-26</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Android">Android</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/04/26/how-repack-third-ROM#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/04/26/how-repack-third-ROM"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>最近对安卓底层比较更兴趣，打算研究一番ROM的制作与移植，汉化之类技术，苦于这方面的比较有技术的文章比较少，多数还借鉴国外帖子，在工具方面也比较少，没有形成一个好的技术圈。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/04/26/how-repack-third-ROM">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Linux，DWM">
        <h3 class="title-meta">Tag "Linux，DWM":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/09/setup-dwm-in-ubuntu-1704" title="在Ubuntu 17.04 下DWM的安装" rel="bookmark">在Ubuntu 17.04 下DWM的安装</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-09</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/09/setup-dwm-in-ubuntu-1704#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/09/setup-dwm-in-ubuntu-1704"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>比较简单的安装方法莫过于通过apt来安装了。</p>

<pre>sudo apt-get install dwm</pre>

<p>这样的安装方式，虽然提供了四种不同的已经配置好的<code>dwm.default</code> <code>dwm.maintainer</code> <code>dwm.web</code> <code>dwm.winky</code>，但相对于dwm的自定义空间基本上是没有的，毕竟dwm的自定义是通过源码重新编译来完成的。</p>

<p>DWM的源码可以从作者的<a href="http://dwm.suckless.org">SuckLess网站</a>下载，网站也提供了一些简单的使用方法，对于一般人来说也足够了。</p>

<p>下载解压至相应路径即可以进行，make install</p>

<p>注意，由于新版本的freetype2库的改动，</p>

<p>需要更新config.mk文件，将中下面两行进行注释:</p>

<pre>#OpenBSD (uncomment)

FREETYPEINC = ${X11INC}/freetype2</pre>

<p>即启用<code>FREETYPEINC = /usr/include/freetype2</code></p>

<p>如果还缺少其它头文件，可以利用apt-file search youfile.h进行查找，并安装相应软件包。</p>

<p>如果make install成功。此时，dwm已经被安装到<code>/usr/local/bin</code>目录下。</p>

<p>参照:<a href="https://wiki.ubuntu.com/CustomXSession">CustomXSession</a> Ubuntu下标准自定义session的配置方法。</p>

<p>在~/.xinitrc 文件中定入以下内容：</p>

<pre>

#!/bin/bash

# enable ibus
export GTK_IM_MODULE=ibus
export QT_IM_MODULE=ibus
export QT4_IM_MODULE=ibus
export CLUTTER_IM_MODULE=ibus
export XMODIFIERS=@im=ibus



exec /usr/local/bin/dwm

</pre>

<p>重启Ubuntu即可在登录选项中看到预先设置dwm选项。</p>

<p>此外，也可以在命令行界面下执行<code>startx</code>命令启动dwm。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/09/setup-dwm-in-ubuntu-1704">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Linux，GTK Theme">
        <h3 class="title-meta">Tag "Linux，GTK Theme":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/10/Diffrents-Ways-to-set-GTK-Theme" title="Linux下各种修改GTK主题的方法" rel="bookmark">Linux下各种修改GTK主题的方法</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-10</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
            <a href="https://mypre.cn/categories/GTK">GTK</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/10/Diffrents-Ways-to-set-GTK-Theme#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/10/Diffrents-Ways-to-set-GTK-Theme"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <blockquote>
  <p>X为了提供更加灵活桌面的实现，使得Linux下桌面环境比较繁杂，这也衍生出众多Coder对自己Linux桌面进行定制的程序。有功能全面的Desktop Env，比如GNOME，KDE，LightDM，也有轻量功能强大的Window Manage，比如owesome，dwm。</p>
</blockquote>

<p>在图形桌面环境下，各个Desktop Env都提供了相应对自身主题的修改，比如gnome-tweak-tool、unity-tweak-tool，通过修改Shell Theme可以切换不同的主题。</p>

<p>命令行下的修改可以通过 <code>gsettings set org.gnome.desktop.interface gtk-theme “Mytheme” </code>来完成。</p>

<p>Linux发行版安装之后会默认自带部分主题，更多好看的可以在 <a href="http://www.gnome-look.org">Gnome Look</a> 、<a href="http://www.kde-look.org">KDE Look</a> 下载。</p>

<p>主题的安装，一般将主题包下载解压至/usr/share/themes/ 或~/.local/share/themes/下即可被各种Tweak程序检测到。</p>

<p>但是，以上方法仅仅是对相应Desktop Env下主题的修改。一旦更换了桌面环境或者窗口管理器，这些效果将消失。</p>

<p>其实，GTK本身提供修改主题的方法：</p>

<p>一、可以通过修改程序运行时环境参数<code>GTK_THEME</code>来临时修改单个程序的主题，比如运行使用Adwaita:light替代Ubuntu下Firefox的橘红色主题：<code>env GTK_THEME=Adwaita:light firefox</code></p>

<p>二、可以通过修改<code>/etc/gtk-3.0/settings.ini</code>或<code>~/.config/gtk-3.0/settings.ini</code>文件中gtk-theme-name项，进行全局修改。</p>

<p>此外，文件还提供了icon图标以及sound声音的修改。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/10/Diffrents-Ways-to-set-GTK-Theme">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="客制化机械键盘">
        <h3 class="title-meta">Tag "客制化机械键盘":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller" title="使用STM32可编程芯片的制作的机械键盘主控" rel="bookmark">使用STM32可编程芯片的制作的机械键盘主控</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
            <a href="https://mypre.cn/categories/STM32">STM32</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>曾经是去年四月的想法，自定义一把顺手的机械键盘，终于到了今年暑期才完成，可怕的拖延症。</p>

<p>然而并不是像想象的那么简单，拿到手的是一把 JAGOR TITON 100 ，由于键盘主控制器与轴板是可分离的连接方式，才有了这个想法。</p>

<p>这其中所要经历的工作有：主控芯片的选择，设计键盘主控制器PCB，为其焊接可编程芯片，开发主控代码，完全拆卸键盘结构，重新焊接键盘轴体和布局背光灯。</p>

<p>芯片选择至关重要，最终找到了一块引脚数量足够多，而且又不缺Demo的Stm32f103c8t6。</p>

<p>将芯片所有多功能引脚全改为IO引脚，其中8个IO作为外部中断使用的列矩阵引脚，其余做为行矩阵引脚，留出多余的用作LED指示灯。</p>

<p>PCB板的设计大小长宽不能超过50＊13mm，使用芯片的最小核心Demo，研究了一番，将多余芯片功能去掉，最后根据轴板IC座引脚功能，调整芯片和电容电阻位置以达到最大化的引脚对应和最少的线路穿插（AD提供鸡肋的组件布局自动化浪费了半天的时间，最后还是手动布局比较靠谱）。最后将设计文档交给华强北的PCB打印厂，50包邮搞定~</p>

<p>接着是将从taobao买到的STM芯片焊到PCB上，没有专业的工具，多用一些松香增加锡的张力，一支尖角电烙铁也可以搞定。</p>

<p>轴板拆缷要借助吸锡器来完成，像PCB这类除了第一次生产之后，永不变动的东西，要再进行二次焊接的话，焊盘很容易脱落，所以改轴和灯光部分需要一次完成。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="机械键盘主控器">
        <h3 class="title-meta">Tag "机械键盘主控器":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller" title="使用STM32可编程芯片的制作的机械键盘主控" rel="bookmark">使用STM32可编程芯片的制作的机械键盘主控</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-11</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
            <a href="https://mypre.cn/categories/STM32">STM32</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>曾经是去年四月的想法，自定义一把顺手的机械键盘，终于到了今年暑期才完成，可怕的拖延症。</p>

<p>然而并不是像想象的那么简单，拿到手的是一把 JAGOR TITON 100 ，由于键盘主控制器与轴板是可分离的连接方式，才有了这个想法。</p>

<p>这其中所要经历的工作有：主控芯片的选择，设计键盘主控制器PCB，为其焊接可编程芯片，开发主控代码，完全拆卸键盘结构，重新焊接键盘轴体和布局背光灯。</p>

<p>芯片选择至关重要，最终找到了一块引脚数量足够多，而且又不缺Demo的Stm32f103c8t6。</p>

<p>将芯片所有多功能引脚全改为IO引脚，其中8个IO作为外部中断使用的列矩阵引脚，其余做为行矩阵引脚，留出多余的用作LED指示灯。</p>

<p>PCB板的设计大小长宽不能超过50＊13mm，使用芯片的最小核心Demo，研究了一番，将多余芯片功能去掉，最后根据轴板IC座引脚功能，调整芯片和电容电阻位置以达到最大化的引脚对应和最少的线路穿插（AD提供鸡肋的组件布局自动化浪费了半天的时间，最后还是手动布局比较靠谱）。最后将设计文档交给华强北的PCB打印厂，50包邮搞定~</p>

<p>接着是将从taobao买到的STM芯片焊到PCB上，没有专业的工具，多用一些松香增加锡的张力，一支尖角电烙铁也可以搞定。</p>

<p>轴板拆缷要借助吸锡器来完成，像PCB这类除了第一次生产之后，永不变动的东西，要再进行二次焊接的话，焊盘很容易脱落，所以改轴和灯光部分需要一次完成。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/11/stm32-f103-mechanical-keyboard-contoller">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="更新ibus输入法词库">
        <h3 class="title-meta">Tag "更新ibus输入法词库":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/08/13/update-ibus-table-for-wubi-pinyin" title="linux下更新ibus-wubi输入法词库" rel="bookmark">linux下更新ibus-wubi输入法词库</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-08-13</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/linux系统">linux系统</a>
          
            <a href="https://mypre.cn/categories/ibus">ibus</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/08/13/update-ibus-table-for-wubi-pinyin#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/08/13/update-ibus-table-for-wubi-pinyin"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <blockquote>
  <p>参考 ubuntu Wiki：<a href="https://wiki.ubuntu.com.cn/IBus">https://wiki.ubuntu.com.cn/IBus</a></p>

  <p>IBus 全称 Intelligent Input Bus是下一代输入法框架（或者说“平台”）。
项目现托管于 Google Code - <a href="https://code.google.com/p/ibus/">https://code.google.com/p/ibus/</a>
此项目包含了世界多数语言的文字输入需求——由世界多个国家开发者维护。</p>
</blockquote>

<p>虽然世界上有那么多人在维护IBus，然而相对于国内的输入法市场，也算是相形见绌了。</p>

<p>输入法默认提供的词库，并没有经过人性化的处理，大部分异体字，以及不常用的词语，还有各类流行短语，比如“跑路”、“静静”、“微博”，部分字词还停还停留在上个世纪的感觉，</p>

<p>所以不得不变回我的Win7从QQ Wubi设置里边导出了一份txt格式的默认词库。（不得不说，腾讯的产品就剩下这点儿清白了）</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/08/13/update-ibus-table-for-wubi-pinyin">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="MCU，MSP432，GPIO">
        <h3 class="title-meta">Tag "MCU，MSP432，GPIO":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/09/20/msp432-gpio-study" title="MSP432中GPIO中断相关操作" rel="bookmark">MSP432中GPIO中断相关操作</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-09-20</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/09/20/msp432-gpio-study#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/09/20/msp432-gpio-study"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>GPIO的P1,P2,PA支持中断</p>

<p><em>MSP432 中的中断相关寄存器</em>
PxIFG 中断标志寄存器
PxIV 中断向量寄存器</p>

<h3 id="driverlib-所涉及到gpio中断的函数">Driverlib 所涉及到GPIO中断的函数</h3>

<p>GPIO_registerInterrupt GPIO_unregisterInterrupt
//Registers/UnRegister s an interrupt handler for the port interrupt.
GPIO_disableInterrupt
GPIO_enableInterrupt
GPIO_getEnabledInterruptStatus
GPIO_interruptEdgeselect
GPIO_getInterruptStatus
GPIO_clearInterruptFlag</p>

<p>![GPIO_IES寄存器][/post_res/GPIO_IES.png]</p>

<p>![GPIO_PxIFG寄存器][/post_res/GPIO_PxIFG.png]</p>

<p>![GPIO_PxIV寄存器][/post_res/GPIO_PxIV.png]</p>

<h3 id="对中断的配置">对中断的配置</h3>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/* Confinguring P1.1 &amp; P1.4 as an input and enabling interrupts */</span>
<span class="n">MAP_GPIO_setAsInputPinWithPullUpResistor</span><span class="p">(</span><span class="n">GPIO_PORT_P1</span><span class="p">,</span> <span class="n">GPIO_PIN1</span> <span class="o">|</span> <span class="n">GPIO_PIN4</span><span class="p">);</span>
<span class="n">MAP_GPIO_clearInterruptFlag</span><span class="p">(</span><span class="n">GPIO_PORT_P1</span><span class="p">,</span> <span class="n">GPIO_PIN1</span> <span class="o">|</span> <span class="n">GPIO_PIN4</span><span class="p">);</span>
<span class="n">MAP_GPIO_enableInterrupt</span><span class="p">(</span><span class="n">GPIO_PORT_P1</span><span class="p">,</span> <span class="n">GPIO_PIN1</span> <span class="o">|</span> <span class="n">GPIO_PIN4</span><span class="p">);</span>
<span class="n">MAP_GPIO_interruptEdgeSelect</span><span class="p">(</span><span class="n">GPIO_PORT_P1</span><span class="p">,</span> <span class="n">GPIO_PIN1</span> <span class="o">|</span> <span class="n">GPIO_PIN4</span><span class="p">,</span> <span class="n">GPIO_HIGH_TO_LOW_TRANSITION</span><span class="p">);</span>
</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/09/20/msp432-gpio-study">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="MCU">
        <h3 class="title-meta">Tag "MCU":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/08/msp432-uart" title="MSP432 launchpad User Application Port UART" rel="bookmark">MSP432 launchpad User Application Port UART</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/08/msp432-uart#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/08/msp432-uart"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="串口通信的配置">串口通信的配置</h2>

<p>串口的配置 主要包括两个方面：</p>
<ul>
  <li>初始化结构体的配置</li>
  <li>串口模块中断的开启</li>
</ul>

<p>以下是基于DriverLib的初始化代码</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="k">const</span> <span class="n">eUSCI_UART_Config</span> <span class="n">uartConfig</span> <span class="o">=</span>
    <span class="p">{</span>
            <span class="n">EUSCI_A_UART_CLOCKSOURCE_SMCLK</span><span class="p">,</span>        <span class="c1">// SMCLK Clock Source 48Mhz
</span>            <span class="mi">312</span><span class="p">,</span>                                   <span class="c1">// BRDIV = 312
</span>            <span class="mi">8</span><span class="p">,</span>                                     <span class="c1">// UCxBRF = 8
</span>            <span class="mh">0xAA</span><span class="p">,</span>                                  <span class="c1">// UCxBRS = 0xAA
</span>            <span class="n">EUSCI_A_UART_NO_PARITY</span><span class="p">,</span>                <span class="c1">// No Parity
</span>            <span class="n">EUSCI_A_UART_LSB_FIRST</span><span class="p">,</span>                <span class="c1">// MSB First
</span>            <span class="n">EUSCI_A_UART_ONE_STOP_BIT</span><span class="p">,</span>             <span class="c1">// One stop bit
</span>            <span class="n">EUSCI_A_UART_MODE</span><span class="p">,</span>                     <span class="c1">// UART mode
</span>            <span class="n">EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION</span>  <span class="c1">// overSampling Mode
</span>    <span class="p">};</span>

    <span class="cm">/* Configuring UART Module */</span>
     <span class="n">UART_initModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">uartConfig</span><span class="p">);</span>

    <span class="cm">/* Enable UART module */</span>
     <span class="n">UART_enableModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>

     <span class="n">UART_enableInterrupt</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="n">EUSCI_A_UART_RECEIVE_INTERRUPT</span><span class="p">);</span>
     <span class="n">Interrupt_enableInterrupt</span><span class="p">(</span><span class="n">INT_EUSCIA0</span><span class="p">);</span>

     <span class="n">MAP_Interrupt_enableSleepOnIsrExit</span><span class="p">();</span> <span class="c1">//低功耗模式
</span></code></pre></div>

<p>比较困难的地方在于波特率的设置主要涉及到BRDIV,UCxBRF,UCxBRS, overSampling Mode这几个寄存器参数。</p>

<blockquote>
  <p>DriverLib手册中提到了一个参数计算器
http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html</p>
</blockquote>

<p>如果上位机可以接收到FF FE之类的乱码一般是波特率设置不正确导致，不同的时钟源频率需要将其分离成所需要的频率,具体的计算公式在Reference Manual 的22.3.10小节有详细说明，将计算出来的波特率只要与上位机设置的相差不远也是可以进行通信的。</p>

<p>此外，网上有一部分相关帖子提到中断名的问题在CCS里边，系统会为所有中断定义一个默认中断，如果程序没有定义相关中断，在程序中又开启了此中断，中断触发后将会陷入到默认中断中。这里的默认中断内容是一个死循环，中断向量表在<code class="highlighter-rouge">startup_msp432p401r_ccs.c</code>中有定义。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code>  <span class="c1">//Configure UART pins
</span>
  <span class="n">P1SEL0</span> <span class="o">|=</span><span class="n">BIT2</span> <span class="o">|</span> <span class="n">BIT3</span><span class="p">;</span>                  <span class="c1">// set2-UART pin as second function
</span>


 <span class="n">__enable_interrupt</span><span class="p">();</span>

 <span class="n">NVIC</span><span class="o">-&gt;</span><span class="n">ISER</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">EUSCIA0_IRQn</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">31</span><span class="p">);</span> <span class="c1">// EnableeUSCIA0 interrupt in NVIC module
</span>
  <span class="c1">//Configure UART
</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSWRST</span><span class="p">;</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSSEL__SMCLK</span><span class="p">;</span>             <span class="c1">// PuteUSCI in reset
</span>
  <span class="c1">// BaudRate calculation
</span>  <span class="c1">//12000000/(16*9600) = 78.125
</span>  <span class="c1">//Fractional portion = 0.125
</span>  <span class="c1">// User'sGuide Table 21-4: UCBRSx = 0x10
</span>  <span class="c1">// UCBRFx =int ( (78.125-78)*16) = 2
</span>
  <span class="n">UCA0BR0</span> <span class="o">=</span><span class="mi">78</span><span class="p">;</span>                           <span class="c1">//12000000/16/9600
</span>  <span class="n">UCA0BR1</span> <span class="o">=</span><span class="mh">0x00</span><span class="p">;</span>
  <span class="n">UCA0MCTLW</span><span class="o">=</span> <span class="mh">0x1000</span> <span class="o">|</span> <span class="n">UCOS16</span> <span class="o">|</span> <span class="mh">0x0020</span><span class="p">;</span>    <span class="c1">//注意这一行的设定
</span>
  <span class="n">UCA0CTLW0</span><span class="o">&amp;=</span> <span class="o">~</span><span class="n">UCSWRST</span><span class="p">;</span>                  <span class="c1">//Initialize eUSCI
</span>
  <span class="n">UCA0IE</span> <span class="o">|=</span><span class="n">UCRXIE</span><span class="p">;</span>                       <span class="c1">// EnableUSCI_A0 RX interrupt
</span></code></pre></div>

<p>近几年来使用DriverLib开发的越来越多了，个人认为DriverLib可以在一定程度上简化开发流程，对新手友好，上手快，但是由于432官方对DriverLib手册并不是非常的友好，很多函数仅仅是一带而过，函数说明甚至没有源码注释写得好，这一使得学习432的内容需要齐头并进，能够简单易懂的用DriverLib难一些的还是要参考寄存器配置。</p>

<p>以下是串口中断处理函数，利用寄存器操作，将收到的串口数据进行回传。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/*
 * EUSCI A0 UART interrupt handler.
 */</span>
<span class="kt">void</span> <span class="nf">EUSCIA0_IRQHandler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">UCA0IFG</span> <span class="o">&amp;</span> <span class="n">UCRXIFG</span><span class="p">)</span>
    <span class="p">{</span>
     <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">UCA0IFG</span><span class="o">&amp;</span><span class="n">UCTXIFG</span><span class="p">));</span>
           <span class="n">UCA0TXBUF</span> <span class="o">=</span> <span class="n">UCA0RXBUF</span><span class="p">;</span>
     <span class="n">__no_operation</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>而DriverLib版：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="kt">int</span> <span class="n">receiveByte</span><span class="p">;</span>
    <span class="n">receiveByte</span> <span class="o">=</span> <span class="n">UART_receiveData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>
    <span class="n">UART_transmitData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span><span class="n">receiveByte</span><span class="p">);</span>
</code></pre></div>

<p>DriverLib的底层实现也是通过寄存器来完成的，这样可以通过学习源代码的方式了解某些寄存器的功能，省略某些技术细节，随着处理器执行效率的提高，代码越来越复杂，这样的库函数操作将会非常常见。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/08/msp432-uart">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM" title="MSP432 使用Timer_A输出PWM" rel="bookmark">MSP432 使用Timer_A输出PWM</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-09-28</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="timer_a-输出-pwm的问题">Timer_A 输出 PWM的问题</h2>

<p>在官方例程中给出的是一种直接操作寄存器的方式启动的，这让我们这些刚刚接触MSP432这种嵌入式芯片的来说是很难看懂的，然而PWM的输出是可以重新映射到其它端口输出的，例程中又掺杂了PMAP GPIO端口的映射，这更使得学习无从下手。</p>

<h3 id="通过寄存器操作的方式输出pwm波形">通过寄存器操作的方式输出PWM波形</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>    TIMER_A0-&gt;CCR[0] = PWM_PERIOD;
    TIMER_A0-&gt;CCTL[1] = TIMER_A_CCTLN_OUTMOD_7;      // CCR1 Reset/set
    TIMER_A0-&gt;CCR[1] = PWM_PERIOD * (55 / 100.0);    // CCR1 PWM duty cycle
    TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK // 使用SMCLK时钟源
                  | TIMER_A_CTL_MC__UP   
                  | TIMER_A_CTL_CLR;  // SMCLK, up mode, clear TAR
</code></pre></div>

<p>引用<code class="highlighter-rouge">msp432p401r.h</code>头文件定义:</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#define TIMER_A_CTL_MC__UP    ((uint16_t)0x0010)    </span><span class="cm">/*!&lt; Up mode: Timer counts up to TAxCCR0 */</span><span class="cp">
</span></code></pre></div>
<p>通过 动态修改 TIMER_A0-&gt;CCR[1] 内容可以改变PWM间隔时间</p>

<h3 id="通过driverlib操作的方式输出pwm波形">通过DriverLib操作的方式输出PWM波形</h3>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/* Timer_A PWM Configuration Parameter */</span>
<span class="n">Timer_A_PWMConfig</span> <span class="n">pwmConfig</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">TIMER_A_CLOCKSOURCE_SMCLK</span><span class="p">,</span>
    <span class="n">TIMER_A_CLOCKSOURCE_DIVIDER_1</span><span class="p">,</span>
    <span class="mi">32000</span><span class="p">,</span>
    <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span>
    <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">,</span>
    <span class="mi">3200</span>
<span class="p">};</span>
<span class="n">Timer_A_generatePWM</span><span class="p">(</span><span class="n">TIMER_A1_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pwmConfig</span><span class="p">);</span>

<span class="n">Timer_A_setCompareValue</span><span class="p">(</span><span class="n">TIMER_A2_BASE</span><span class="p">,</span> <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span> <span class="n">PWM_PERIOD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">));</span> <span class="c1">//动态设置PWM 间隔时间
</span></code></pre></div>

<p>而timer_a.C文件中对<code class="highlighter-rouge">Timer_A_generatePWM</code>函数定义如下</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">Timer_A_generatePWM</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">timer</span><span class="p">,</span> <span class="k">const</span> <span class="n">Timer_A_PWMConfig</span> <span class="o">*</span><span class="n">config</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//此处省略一部分，参数合法判断...
</span>
    <span class="n">privateTimer_AProcessClockSourceDivider</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSourceDivider</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">&amp;=</span>
            <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CLOCKSOURCE_INVERTED_EXTERNAL_TXCLK</span> <span class="o">+</span> <span class="n">TIMER_A_UPDOWN_MODE</span>
                    <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span> <span class="o">+</span> <span class="n">TIMER_A_TAIE_INTERRUPT_ENABLE</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">|=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSource</span> <span class="o">+</span> <span class="n">TIMER_A_UP_MODE</span>
            <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">timerPeriod</span><span class="p">;</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CAPTURECOMPARE_INTERRUPT_ENABLE</span>
            <span class="o">+</span> <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">);</span>

    <span class="kt">uint8_t</span> <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">compareRegister</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">|=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">compareOutputMode</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">dutyCycle</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>可以看到相关操作与寄存器类似，但一次只能修改一路PWM输出。难怪官方例程中直接使用寄存器操作，多路输出更加容易控制。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="MSP432">
        <h3 class="title-meta">Tag "MSP432":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/08/msp432-uart" title="MSP432 launchpad User Application Port UART" rel="bookmark">MSP432 launchpad User Application Port UART</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/08/msp432-uart#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/08/msp432-uart"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="串口通信的配置">串口通信的配置</h2>

<p>串口的配置 主要包括两个方面：</p>
<ul>
  <li>初始化结构体的配置</li>
  <li>串口模块中断的开启</li>
</ul>

<p>以下是基于DriverLib的初始化代码</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="k">const</span> <span class="n">eUSCI_UART_Config</span> <span class="n">uartConfig</span> <span class="o">=</span>
    <span class="p">{</span>
            <span class="n">EUSCI_A_UART_CLOCKSOURCE_SMCLK</span><span class="p">,</span>        <span class="c1">// SMCLK Clock Source 48Mhz
</span>            <span class="mi">312</span><span class="p">,</span>                                   <span class="c1">// BRDIV = 312
</span>            <span class="mi">8</span><span class="p">,</span>                                     <span class="c1">// UCxBRF = 8
</span>            <span class="mh">0xAA</span><span class="p">,</span>                                  <span class="c1">// UCxBRS = 0xAA
</span>            <span class="n">EUSCI_A_UART_NO_PARITY</span><span class="p">,</span>                <span class="c1">// No Parity
</span>            <span class="n">EUSCI_A_UART_LSB_FIRST</span><span class="p">,</span>                <span class="c1">// MSB First
</span>            <span class="n">EUSCI_A_UART_ONE_STOP_BIT</span><span class="p">,</span>             <span class="c1">// One stop bit
</span>            <span class="n">EUSCI_A_UART_MODE</span><span class="p">,</span>                     <span class="c1">// UART mode
</span>            <span class="n">EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION</span>  <span class="c1">// overSampling Mode
</span>    <span class="p">};</span>

    <span class="cm">/* Configuring UART Module */</span>
     <span class="n">UART_initModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">uartConfig</span><span class="p">);</span>

    <span class="cm">/* Enable UART module */</span>
     <span class="n">UART_enableModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>

     <span class="n">UART_enableInterrupt</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="n">EUSCI_A_UART_RECEIVE_INTERRUPT</span><span class="p">);</span>
     <span class="n">Interrupt_enableInterrupt</span><span class="p">(</span><span class="n">INT_EUSCIA0</span><span class="p">);</span>

     <span class="n">MAP_Interrupt_enableSleepOnIsrExit</span><span class="p">();</span> <span class="c1">//低功耗模式
</span></code></pre></div>

<p>比较困难的地方在于波特率的设置主要涉及到BRDIV,UCxBRF,UCxBRS, overSampling Mode这几个寄存器参数。</p>

<blockquote>
  <p>DriverLib手册中提到了一个参数计算器
http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html</p>
</blockquote>

<p>如果上位机可以接收到FF FE之类的乱码一般是波特率设置不正确导致，不同的时钟源频率需要将其分离成所需要的频率,具体的计算公式在Reference Manual 的22.3.10小节有详细说明，将计算出来的波特率只要与上位机设置的相差不远也是可以进行通信的。</p>

<p>此外，网上有一部分相关帖子提到中断名的问题在CCS里边，系统会为所有中断定义一个默认中断，如果程序没有定义相关中断，在程序中又开启了此中断，中断触发后将会陷入到默认中断中。这里的默认中断内容是一个死循环，中断向量表在<code class="highlighter-rouge">startup_msp432p401r_ccs.c</code>中有定义。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code>  <span class="c1">//Configure UART pins
</span>
  <span class="n">P1SEL0</span> <span class="o">|=</span><span class="n">BIT2</span> <span class="o">|</span> <span class="n">BIT3</span><span class="p">;</span>                  <span class="c1">// set2-UART pin as second function
</span>


 <span class="n">__enable_interrupt</span><span class="p">();</span>

 <span class="n">NVIC</span><span class="o">-&gt;</span><span class="n">ISER</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">EUSCIA0_IRQn</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">31</span><span class="p">);</span> <span class="c1">// EnableeUSCIA0 interrupt in NVIC module
</span>
  <span class="c1">//Configure UART
</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSWRST</span><span class="p">;</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSSEL__SMCLK</span><span class="p">;</span>             <span class="c1">// PuteUSCI in reset
</span>
  <span class="c1">// BaudRate calculation
</span>  <span class="c1">//12000000/(16*9600) = 78.125
</span>  <span class="c1">//Fractional portion = 0.125
</span>  <span class="c1">// User'sGuide Table 21-4: UCBRSx = 0x10
</span>  <span class="c1">// UCBRFx =int ( (78.125-78)*16) = 2
</span>
  <span class="n">UCA0BR0</span> <span class="o">=</span><span class="mi">78</span><span class="p">;</span>                           <span class="c1">//12000000/16/9600
</span>  <span class="n">UCA0BR1</span> <span class="o">=</span><span class="mh">0x00</span><span class="p">;</span>
  <span class="n">UCA0MCTLW</span><span class="o">=</span> <span class="mh">0x1000</span> <span class="o">|</span> <span class="n">UCOS16</span> <span class="o">|</span> <span class="mh">0x0020</span><span class="p">;</span>    <span class="c1">//注意这一行的设定
</span>
  <span class="n">UCA0CTLW0</span><span class="o">&amp;=</span> <span class="o">~</span><span class="n">UCSWRST</span><span class="p">;</span>                  <span class="c1">//Initialize eUSCI
</span>
  <span class="n">UCA0IE</span> <span class="o">|=</span><span class="n">UCRXIE</span><span class="p">;</span>                       <span class="c1">// EnableUSCI_A0 RX interrupt
</span></code></pre></div>

<p>近几年来使用DriverLib开发的越来越多了，个人认为DriverLib可以在一定程度上简化开发流程，对新手友好，上手快，但是由于432官方对DriverLib手册并不是非常的友好，很多函数仅仅是一带而过，函数说明甚至没有源码注释写得好，这一使得学习432的内容需要齐头并进，能够简单易懂的用DriverLib难一些的还是要参考寄存器配置。</p>

<p>以下是串口中断处理函数，利用寄存器操作，将收到的串口数据进行回传。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/*
 * EUSCI A0 UART interrupt handler.
 */</span>
<span class="kt">void</span> <span class="nf">EUSCIA0_IRQHandler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">UCA0IFG</span> <span class="o">&amp;</span> <span class="n">UCRXIFG</span><span class="p">)</span>
    <span class="p">{</span>
     <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">UCA0IFG</span><span class="o">&amp;</span><span class="n">UCTXIFG</span><span class="p">));</span>
           <span class="n">UCA0TXBUF</span> <span class="o">=</span> <span class="n">UCA0RXBUF</span><span class="p">;</span>
     <span class="n">__no_operation</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>而DriverLib版：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="kt">int</span> <span class="n">receiveByte</span><span class="p">;</span>
    <span class="n">receiveByte</span> <span class="o">=</span> <span class="n">UART_receiveData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>
    <span class="n">UART_transmitData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span><span class="n">receiveByte</span><span class="p">);</span>
</code></pre></div>

<p>DriverLib的底层实现也是通过寄存器来完成的，这样可以通过学习源代码的方式了解某些寄存器的功能，省略某些技术细节，随着处理器执行效率的提高，代码越来越复杂，这样的库函数操作将会非常常见。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/08/msp432-uart">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM" title="MSP432 使用Timer_A输出PWM" rel="bookmark">MSP432 使用Timer_A输出PWM</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-09-28</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="timer_a-输出-pwm的问题">Timer_A 输出 PWM的问题</h2>

<p>在官方例程中给出的是一种直接操作寄存器的方式启动的，这让我们这些刚刚接触MSP432这种嵌入式芯片的来说是很难看懂的，然而PWM的输出是可以重新映射到其它端口输出的，例程中又掺杂了PMAP GPIO端口的映射，这更使得学习无从下手。</p>

<h3 id="通过寄存器操作的方式输出pwm波形">通过寄存器操作的方式输出PWM波形</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>    TIMER_A0-&gt;CCR[0] = PWM_PERIOD;
    TIMER_A0-&gt;CCTL[1] = TIMER_A_CCTLN_OUTMOD_7;      // CCR1 Reset/set
    TIMER_A0-&gt;CCR[1] = PWM_PERIOD * (55 / 100.0);    // CCR1 PWM duty cycle
    TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK // 使用SMCLK时钟源
                  | TIMER_A_CTL_MC__UP   
                  | TIMER_A_CTL_CLR;  // SMCLK, up mode, clear TAR
</code></pre></div>

<p>引用<code class="highlighter-rouge">msp432p401r.h</code>头文件定义:</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#define TIMER_A_CTL_MC__UP    ((uint16_t)0x0010)    </span><span class="cm">/*!&lt; Up mode: Timer counts up to TAxCCR0 */</span><span class="cp">
</span></code></pre></div>
<p>通过 动态修改 TIMER_A0-&gt;CCR[1] 内容可以改变PWM间隔时间</p>

<h3 id="通过driverlib操作的方式输出pwm波形">通过DriverLib操作的方式输出PWM波形</h3>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/* Timer_A PWM Configuration Parameter */</span>
<span class="n">Timer_A_PWMConfig</span> <span class="n">pwmConfig</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">TIMER_A_CLOCKSOURCE_SMCLK</span><span class="p">,</span>
    <span class="n">TIMER_A_CLOCKSOURCE_DIVIDER_1</span><span class="p">,</span>
    <span class="mi">32000</span><span class="p">,</span>
    <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span>
    <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">,</span>
    <span class="mi">3200</span>
<span class="p">};</span>
<span class="n">Timer_A_generatePWM</span><span class="p">(</span><span class="n">TIMER_A1_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pwmConfig</span><span class="p">);</span>

<span class="n">Timer_A_setCompareValue</span><span class="p">(</span><span class="n">TIMER_A2_BASE</span><span class="p">,</span> <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span> <span class="n">PWM_PERIOD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">));</span> <span class="c1">//动态设置PWM 间隔时间
</span></code></pre></div>

<p>而timer_a.C文件中对<code class="highlighter-rouge">Timer_A_generatePWM</code>函数定义如下</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">Timer_A_generatePWM</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">timer</span><span class="p">,</span> <span class="k">const</span> <span class="n">Timer_A_PWMConfig</span> <span class="o">*</span><span class="n">config</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//此处省略一部分，参数合法判断...
</span>
    <span class="n">privateTimer_AProcessClockSourceDivider</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSourceDivider</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">&amp;=</span>
            <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CLOCKSOURCE_INVERTED_EXTERNAL_TXCLK</span> <span class="o">+</span> <span class="n">TIMER_A_UPDOWN_MODE</span>
                    <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span> <span class="o">+</span> <span class="n">TIMER_A_TAIE_INTERRUPT_ENABLE</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">|=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSource</span> <span class="o">+</span> <span class="n">TIMER_A_UP_MODE</span>
            <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">timerPeriod</span><span class="p">;</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CAPTURECOMPARE_INTERRUPT_ENABLE</span>
            <span class="o">+</span> <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">);</span>

    <span class="kt">uint8_t</span> <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">compareRegister</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">|=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">compareOutputMode</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">dutyCycle</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>可以看到相关操作与寄存器类似，但一次只能修改一路PWM输出。难怪官方例程中直接使用寄存器操作，多路输出更加容易控制。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Timer_A">
        <h3 class="title-meta">Tag "Timer_A":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM" title="MSP432 使用Timer_A输出PWM" rel="bookmark">MSP432 使用Timer_A输出PWM</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-09-28</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="timer_a-输出-pwm的问题">Timer_A 输出 PWM的问题</h2>

<p>在官方例程中给出的是一种直接操作寄存器的方式启动的，这让我们这些刚刚接触MSP432这种嵌入式芯片的来说是很难看懂的，然而PWM的输出是可以重新映射到其它端口输出的，例程中又掺杂了PMAP GPIO端口的映射，这更使得学习无从下手。</p>

<h3 id="通过寄存器操作的方式输出pwm波形">通过寄存器操作的方式输出PWM波形</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>    TIMER_A0-&gt;CCR[0] = PWM_PERIOD;
    TIMER_A0-&gt;CCTL[1] = TIMER_A_CCTLN_OUTMOD_7;      // CCR1 Reset/set
    TIMER_A0-&gt;CCR[1] = PWM_PERIOD * (55 / 100.0);    // CCR1 PWM duty cycle
    TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK // 使用SMCLK时钟源
                  | TIMER_A_CTL_MC__UP   
                  | TIMER_A_CTL_CLR;  // SMCLK, up mode, clear TAR
</code></pre></div>

<p>引用<code class="highlighter-rouge">msp432p401r.h</code>头文件定义:</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#define TIMER_A_CTL_MC__UP    ((uint16_t)0x0010)    </span><span class="cm">/*!&lt; Up mode: Timer counts up to TAxCCR0 */</span><span class="cp">
</span></code></pre></div>
<p>通过 动态修改 TIMER_A0-&gt;CCR[1] 内容可以改变PWM间隔时间</p>

<h3 id="通过driverlib操作的方式输出pwm波形">通过DriverLib操作的方式输出PWM波形</h3>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/* Timer_A PWM Configuration Parameter */</span>
<span class="n">Timer_A_PWMConfig</span> <span class="n">pwmConfig</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">TIMER_A_CLOCKSOURCE_SMCLK</span><span class="p">,</span>
    <span class="n">TIMER_A_CLOCKSOURCE_DIVIDER_1</span><span class="p">,</span>
    <span class="mi">32000</span><span class="p">,</span>
    <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span>
    <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">,</span>
    <span class="mi">3200</span>
<span class="p">};</span>
<span class="n">Timer_A_generatePWM</span><span class="p">(</span><span class="n">TIMER_A1_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pwmConfig</span><span class="p">);</span>

<span class="n">Timer_A_setCompareValue</span><span class="p">(</span><span class="n">TIMER_A2_BASE</span><span class="p">,</span> <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span> <span class="n">PWM_PERIOD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">));</span> <span class="c1">//动态设置PWM 间隔时间
</span></code></pre></div>

<p>而timer_a.C文件中对<code class="highlighter-rouge">Timer_A_generatePWM</code>函数定义如下</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">Timer_A_generatePWM</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">timer</span><span class="p">,</span> <span class="k">const</span> <span class="n">Timer_A_PWMConfig</span> <span class="o">*</span><span class="n">config</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//此处省略一部分，参数合法判断...
</span>
    <span class="n">privateTimer_AProcessClockSourceDivider</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSourceDivider</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">&amp;=</span>
            <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CLOCKSOURCE_INVERTED_EXTERNAL_TXCLK</span> <span class="o">+</span> <span class="n">TIMER_A_UPDOWN_MODE</span>
                    <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span> <span class="o">+</span> <span class="n">TIMER_A_TAIE_INTERRUPT_ENABLE</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">|=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSource</span> <span class="o">+</span> <span class="n">TIMER_A_UP_MODE</span>
            <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">timerPeriod</span><span class="p">;</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CAPTURECOMPARE_INTERRUPT_ENABLE</span>
            <span class="o">+</span> <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">);</span>

    <span class="kt">uint8_t</span> <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">compareRegister</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">|=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">compareOutputMode</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">dutyCycle</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>可以看到相关操作与寄存器类似，但一次只能修改一路PWM输出。难怪官方例程中直接使用寄存器操作，多路输出更加容易控制。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="PWM">
        <h3 class="title-meta">Tag "PWM":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM" title="MSP432 使用Timer_A输出PWM" rel="bookmark">MSP432 使用Timer_A输出PWM</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-09-28</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="timer_a-输出-pwm的问题">Timer_A 输出 PWM的问题</h2>

<p>在官方例程中给出的是一种直接操作寄存器的方式启动的，这让我们这些刚刚接触MSP432这种嵌入式芯片的来说是很难看懂的，然而PWM的输出是可以重新映射到其它端口输出的，例程中又掺杂了PMAP GPIO端口的映射，这更使得学习无从下手。</p>

<h3 id="通过寄存器操作的方式输出pwm波形">通过寄存器操作的方式输出PWM波形</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>    TIMER_A0-&gt;CCR[0] = PWM_PERIOD;
    TIMER_A0-&gt;CCTL[1] = TIMER_A_CCTLN_OUTMOD_7;      // CCR1 Reset/set
    TIMER_A0-&gt;CCR[1] = PWM_PERIOD * (55 / 100.0);    // CCR1 PWM duty cycle
    TIMER_A0-&gt;CTL = TIMER_A_CTL_SSEL__SMCLK // 使用SMCLK时钟源
                  | TIMER_A_CTL_MC__UP   
                  | TIMER_A_CTL_CLR;  // SMCLK, up mode, clear TAR
</code></pre></div>

<p>引用<code class="highlighter-rouge">msp432p401r.h</code>头文件定义:</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#define TIMER_A_CTL_MC__UP    ((uint16_t)0x0010)    </span><span class="cm">/*!&lt; Up mode: Timer counts up to TAxCCR0 */</span><span class="cp">
</span></code></pre></div>
<p>通过 动态修改 TIMER_A0-&gt;CCR[1] 内容可以改变PWM间隔时间</p>

<h3 id="通过driverlib操作的方式输出pwm波形">通过DriverLib操作的方式输出PWM波形</h3>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/* Timer_A PWM Configuration Parameter */</span>
<span class="n">Timer_A_PWMConfig</span> <span class="n">pwmConfig</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">TIMER_A_CLOCKSOURCE_SMCLK</span><span class="p">,</span>
    <span class="n">TIMER_A_CLOCKSOURCE_DIVIDER_1</span><span class="p">,</span>
    <span class="mi">32000</span><span class="p">,</span>
    <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span>
    <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">,</span>
    <span class="mi">3200</span>
<span class="p">};</span>
<span class="n">Timer_A_generatePWM</span><span class="p">(</span><span class="n">TIMER_A1_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">pwmConfig</span><span class="p">);</span>

<span class="n">Timer_A_setCompareValue</span><span class="p">(</span><span class="n">TIMER_A2_BASE</span><span class="p">,</span> <span class="n">TIMER_A_CAPTURECOMPARE_REGISTER_1</span><span class="p">,</span> <span class="n">PWM_PERIOD</span> <span class="o">*</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">.</span><span class="mi">0</span><span class="n">f</span><span class="p">));</span> <span class="c1">//动态设置PWM 间隔时间
</span></code></pre></div>

<p>而timer_a.C文件中对<code class="highlighter-rouge">Timer_A_generatePWM</code>函数定义如下</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">Timer_A_generatePWM</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">timer</span><span class="p">,</span> <span class="k">const</span> <span class="n">Timer_A_PWMConfig</span> <span class="o">*</span><span class="n">config</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">//此处省略一部分，参数合法判断...
</span>
    <span class="n">privateTimer_AProcessClockSourceDivider</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSourceDivider</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">&amp;=</span>
            <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CLOCKSOURCE_INVERTED_EXTERNAL_TXCLK</span> <span class="o">+</span> <span class="n">TIMER_A_UPDOWN_MODE</span>
                    <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span> <span class="o">+</span> <span class="n">TIMER_A_TAIE_INTERRUPT_ENABLE</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CTL</span> <span class="o">|=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">clockSource</span> <span class="o">+</span> <span class="n">TIMER_A_UP_MODE</span>
            <span class="o">+</span> <span class="n">TIMER_A_DO_CLEAR</span><span class="p">);</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">timerPeriod</span><span class="p">;</span>

    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="p">(</span><span class="n">TIMER_A_CAPTURECOMPARE_INTERRUPT_ENABLE</span>
            <span class="o">+</span> <span class="n">TIMER_A_OUTPUTMODE_RESET_SET</span><span class="p">);</span>

    <span class="kt">uint8_t</span> <span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">config</span><span class="o">-&gt;</span><span class="n">compareRegister</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCTL</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">|=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">compareOutputMode</span><span class="p">;</span>
    <span class="n">TIMER_A_CMSIS</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">CCR</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span><span class="o">-&gt;</span><span class="n">dutyCycle</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>可以看到相关操作与寄存器类似，但一次只能修改一路PWM输出。难怪官方例程中直接使用寄存器操作，多路输出更加容易控制。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/09/28/msp432-Timer_A-PWM">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="UART">
        <h3 class="title-meta">Tag "UART":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/08/msp432-uart" title="MSP432 launchpad User Application Port UART" rel="bookmark">MSP432 launchpad User Application Port UART</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/08/msp432-uart#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/08/msp432-uart"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="串口通信的配置">串口通信的配置</h2>

<p>串口的配置 主要包括两个方面：</p>
<ul>
  <li>初始化结构体的配置</li>
  <li>串口模块中断的开启</li>
</ul>

<p>以下是基于DriverLib的初始化代码</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="k">const</span> <span class="n">eUSCI_UART_Config</span> <span class="n">uartConfig</span> <span class="o">=</span>
    <span class="p">{</span>
            <span class="n">EUSCI_A_UART_CLOCKSOURCE_SMCLK</span><span class="p">,</span>        <span class="c1">// SMCLK Clock Source 48Mhz
</span>            <span class="mi">312</span><span class="p">,</span>                                   <span class="c1">// BRDIV = 312
</span>            <span class="mi">8</span><span class="p">,</span>                                     <span class="c1">// UCxBRF = 8
</span>            <span class="mh">0xAA</span><span class="p">,</span>                                  <span class="c1">// UCxBRS = 0xAA
</span>            <span class="n">EUSCI_A_UART_NO_PARITY</span><span class="p">,</span>                <span class="c1">// No Parity
</span>            <span class="n">EUSCI_A_UART_LSB_FIRST</span><span class="p">,</span>                <span class="c1">// MSB First
</span>            <span class="n">EUSCI_A_UART_ONE_STOP_BIT</span><span class="p">,</span>             <span class="c1">// One stop bit
</span>            <span class="n">EUSCI_A_UART_MODE</span><span class="p">,</span>                     <span class="c1">// UART mode
</span>            <span class="n">EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION</span>  <span class="c1">// overSampling Mode
</span>    <span class="p">};</span>

    <span class="cm">/* Configuring UART Module */</span>
     <span class="n">UART_initModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">uartConfig</span><span class="p">);</span>

    <span class="cm">/* Enable UART module */</span>
     <span class="n">UART_enableModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>

     <span class="n">UART_enableInterrupt</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="n">EUSCI_A_UART_RECEIVE_INTERRUPT</span><span class="p">);</span>
     <span class="n">Interrupt_enableInterrupt</span><span class="p">(</span><span class="n">INT_EUSCIA0</span><span class="p">);</span>

     <span class="n">MAP_Interrupt_enableSleepOnIsrExit</span><span class="p">();</span> <span class="c1">//低功耗模式
</span></code></pre></div>

<p>比较困难的地方在于波特率的设置主要涉及到BRDIV,UCxBRF,UCxBRS, overSampling Mode这几个寄存器参数。</p>

<blockquote>
  <p>DriverLib手册中提到了一个参数计算器
http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html</p>
</blockquote>

<p>如果上位机可以接收到FF FE之类的乱码一般是波特率设置不正确导致，不同的时钟源频率需要将其分离成所需要的频率,具体的计算公式在Reference Manual 的22.3.10小节有详细说明，将计算出来的波特率只要与上位机设置的相差不远也是可以进行通信的。</p>

<p>此外，网上有一部分相关帖子提到中断名的问题在CCS里边，系统会为所有中断定义一个默认中断，如果程序没有定义相关中断，在程序中又开启了此中断，中断触发后将会陷入到默认中断中。这里的默认中断内容是一个死循环，中断向量表在<code class="highlighter-rouge">startup_msp432p401r_ccs.c</code>中有定义。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code>  <span class="c1">//Configure UART pins
</span>
  <span class="n">P1SEL0</span> <span class="o">|=</span><span class="n">BIT2</span> <span class="o">|</span> <span class="n">BIT3</span><span class="p">;</span>                  <span class="c1">// set2-UART pin as second function
</span>


 <span class="n">__enable_interrupt</span><span class="p">();</span>

 <span class="n">NVIC</span><span class="o">-&gt;</span><span class="n">ISER</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">EUSCIA0_IRQn</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">31</span><span class="p">);</span> <span class="c1">// EnableeUSCIA0 interrupt in NVIC module
</span>
  <span class="c1">//Configure UART
</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSWRST</span><span class="p">;</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSSEL__SMCLK</span><span class="p">;</span>             <span class="c1">// PuteUSCI in reset
</span>
  <span class="c1">// BaudRate calculation
</span>  <span class="c1">//12000000/(16*9600) = 78.125
</span>  <span class="c1">//Fractional portion = 0.125
</span>  <span class="c1">// User'sGuide Table 21-4: UCBRSx = 0x10
</span>  <span class="c1">// UCBRFx =int ( (78.125-78)*16) = 2
</span>
  <span class="n">UCA0BR0</span> <span class="o">=</span><span class="mi">78</span><span class="p">;</span>                           <span class="c1">//12000000/16/9600
</span>  <span class="n">UCA0BR1</span> <span class="o">=</span><span class="mh">0x00</span><span class="p">;</span>
  <span class="n">UCA0MCTLW</span><span class="o">=</span> <span class="mh">0x1000</span> <span class="o">|</span> <span class="n">UCOS16</span> <span class="o">|</span> <span class="mh">0x0020</span><span class="p">;</span>    <span class="c1">//注意这一行的设定
</span>
  <span class="n">UCA0CTLW0</span><span class="o">&amp;=</span> <span class="o">~</span><span class="n">UCSWRST</span><span class="p">;</span>                  <span class="c1">//Initialize eUSCI
</span>
  <span class="n">UCA0IE</span> <span class="o">|=</span><span class="n">UCRXIE</span><span class="p">;</span>                       <span class="c1">// EnableUSCI_A0 RX interrupt
</span></code></pre></div>

<p>近几年来使用DriverLib开发的越来越多了，个人认为DriverLib可以在一定程度上简化开发流程，对新手友好，上手快，但是由于432官方对DriverLib手册并不是非常的友好，很多函数仅仅是一带而过，函数说明甚至没有源码注释写得好，这一使得学习432的内容需要齐头并进，能够简单易懂的用DriverLib难一些的还是要参考寄存器配置。</p>

<p>以下是串口中断处理函数，利用寄存器操作，将收到的串口数据进行回传。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/*
 * EUSCI A0 UART interrupt handler.
 */</span>
<span class="kt">void</span> <span class="nf">EUSCIA0_IRQHandler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">UCA0IFG</span> <span class="o">&amp;</span> <span class="n">UCRXIFG</span><span class="p">)</span>
    <span class="p">{</span>
     <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">UCA0IFG</span><span class="o">&amp;</span><span class="n">UCTXIFG</span><span class="p">));</span>
           <span class="n">UCA0TXBUF</span> <span class="o">=</span> <span class="n">UCA0RXBUF</span><span class="p">;</span>
     <span class="n">__no_operation</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>而DriverLib版：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="kt">int</span> <span class="n">receiveByte</span><span class="p">;</span>
    <span class="n">receiveByte</span> <span class="o">=</span> <span class="n">UART_receiveData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>
    <span class="n">UART_transmitData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span><span class="n">receiveByte</span><span class="p">);</span>
</code></pre></div>

<p>DriverLib的底层实现也是通过寄存器来完成的，这样可以通过学习源代码的方式了解某些寄存器的功能，省略某些技术细节，随着处理器执行效率的提高，代码越来越复杂，这样的库函数操作将会非常常见。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/08/msp432-uart">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="串口通信">
        <h3 class="title-meta">Tag "串口通信":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/08/msp432-uart" title="MSP432 launchpad User Application Port UART" rel="bookmark">MSP432 launchpad User Application Port UART</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-08</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/08/msp432-uart#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/08/msp432-uart"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h2 id="串口通信的配置">串口通信的配置</h2>

<p>串口的配置 主要包括两个方面：</p>
<ul>
  <li>初始化结构体的配置</li>
  <li>串口模块中断的开启</li>
</ul>

<p>以下是基于DriverLib的初始化代码</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="k">const</span> <span class="n">eUSCI_UART_Config</span> <span class="n">uartConfig</span> <span class="o">=</span>
    <span class="p">{</span>
            <span class="n">EUSCI_A_UART_CLOCKSOURCE_SMCLK</span><span class="p">,</span>        <span class="c1">// SMCLK Clock Source 48Mhz
</span>            <span class="mi">312</span><span class="p">,</span>                                   <span class="c1">// BRDIV = 312
</span>            <span class="mi">8</span><span class="p">,</span>                                     <span class="c1">// UCxBRF = 8
</span>            <span class="mh">0xAA</span><span class="p">,</span>                                  <span class="c1">// UCxBRS = 0xAA
</span>            <span class="n">EUSCI_A_UART_NO_PARITY</span><span class="p">,</span>                <span class="c1">// No Parity
</span>            <span class="n">EUSCI_A_UART_LSB_FIRST</span><span class="p">,</span>                <span class="c1">// MSB First
</span>            <span class="n">EUSCI_A_UART_ONE_STOP_BIT</span><span class="p">,</span>             <span class="c1">// One stop bit
</span>            <span class="n">EUSCI_A_UART_MODE</span><span class="p">,</span>                     <span class="c1">// UART mode
</span>            <span class="n">EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION</span>  <span class="c1">// overSampling Mode
</span>    <span class="p">};</span>

    <span class="cm">/* Configuring UART Module */</span>
     <span class="n">UART_initModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">uartConfig</span><span class="p">);</span>

    <span class="cm">/* Enable UART module */</span>
     <span class="n">UART_enableModule</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>

     <span class="n">UART_enableInterrupt</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span> <span class="n">EUSCI_A_UART_RECEIVE_INTERRUPT</span><span class="p">);</span>
     <span class="n">Interrupt_enableInterrupt</span><span class="p">(</span><span class="n">INT_EUSCIA0</span><span class="p">);</span>

     <span class="n">MAP_Interrupt_enableSleepOnIsrExit</span><span class="p">();</span> <span class="c1">//低功耗模式
</span></code></pre></div>

<p>比较困难的地方在于波特率的设置主要涉及到BRDIV,UCxBRF,UCxBRS, overSampling Mode这几个寄存器参数。</p>

<blockquote>
  <p>DriverLib手册中提到了一个参数计算器
http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html</p>
</blockquote>

<p>如果上位机可以接收到FF FE之类的乱码一般是波特率设置不正确导致，不同的时钟源频率需要将其分离成所需要的频率,具体的计算公式在Reference Manual 的22.3.10小节有详细说明，将计算出来的波特率只要与上位机设置的相差不远也是可以进行通信的。</p>

<p>此外，网上有一部分相关帖子提到中断名的问题在CCS里边，系统会为所有中断定义一个默认中断，如果程序没有定义相关中断，在程序中又开启了此中断，中断触发后将会陷入到默认中断中。这里的默认中断内容是一个死循环，中断向量表在<code class="highlighter-rouge">startup_msp432p401r_ccs.c</code>中有定义。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code>  <span class="c1">//Configure UART pins
</span>
  <span class="n">P1SEL0</span> <span class="o">|=</span><span class="n">BIT2</span> <span class="o">|</span> <span class="n">BIT3</span><span class="p">;</span>                  <span class="c1">// set2-UART pin as second function
</span>


 <span class="n">__enable_interrupt</span><span class="p">();</span>

 <span class="n">NVIC</span><span class="o">-&gt;</span><span class="n">ISER</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">EUSCIA0_IRQn</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">31</span><span class="p">);</span> <span class="c1">// EnableeUSCIA0 interrupt in NVIC module
</span>
  <span class="c1">//Configure UART
</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSWRST</span><span class="p">;</span>
  <span class="n">UCA0CTLW0</span><span class="o">|=</span> <span class="n">UCSSEL__SMCLK</span><span class="p">;</span>             <span class="c1">// PuteUSCI in reset
</span>
  <span class="c1">// BaudRate calculation
</span>  <span class="c1">//12000000/(16*9600) = 78.125
</span>  <span class="c1">//Fractional portion = 0.125
</span>  <span class="c1">// User'sGuide Table 21-4: UCBRSx = 0x10
</span>  <span class="c1">// UCBRFx =int ( (78.125-78)*16) = 2
</span>
  <span class="n">UCA0BR0</span> <span class="o">=</span><span class="mi">78</span><span class="p">;</span>                           <span class="c1">//12000000/16/9600
</span>  <span class="n">UCA0BR1</span> <span class="o">=</span><span class="mh">0x00</span><span class="p">;</span>
  <span class="n">UCA0MCTLW</span><span class="o">=</span> <span class="mh">0x1000</span> <span class="o">|</span> <span class="n">UCOS16</span> <span class="o">|</span> <span class="mh">0x0020</span><span class="p">;</span>    <span class="c1">//注意这一行的设定
</span>
  <span class="n">UCA0CTLW0</span><span class="o">&amp;=</span> <span class="o">~</span><span class="n">UCSWRST</span><span class="p">;</span>                  <span class="c1">//Initialize eUSCI
</span>
  <span class="n">UCA0IE</span> <span class="o">|=</span><span class="n">UCRXIE</span><span class="p">;</span>                       <span class="c1">// EnableUSCI_A0 RX interrupt
</span></code></pre></div>

<p>近几年来使用DriverLib开发的越来越多了，个人认为DriverLib可以在一定程度上简化开发流程，对新手友好，上手快，但是由于432官方对DriverLib手册并不是非常的友好，很多函数仅仅是一带而过，函数说明甚至没有源码注释写得好，这一使得学习432的内容需要齐头并进，能够简单易懂的用DriverLib难一些的还是要参考寄存器配置。</p>

<p>以下是串口中断处理函数，利用寄存器操作，将收到的串口数据进行回传。</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cm">/*
 * EUSCI A0 UART interrupt handler.
 */</span>
<span class="kt">void</span> <span class="nf">EUSCIA0_IRQHandler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">UCA0IFG</span> <span class="o">&amp;</span> <span class="n">UCRXIFG</span><span class="p">)</span>
    <span class="p">{</span>
     <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">UCA0IFG</span><span class="o">&amp;</span><span class="n">UCTXIFG</span><span class="p">));</span>
           <span class="n">UCA0TXBUF</span> <span class="o">=</span> <span class="n">UCA0RXBUF</span><span class="p">;</span>
     <span class="n">__no_operation</span><span class="p">();</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>而DriverLib版：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="kt">int</span> <span class="n">receiveByte</span><span class="p">;</span>
    <span class="n">receiveByte</span> <span class="o">=</span> <span class="n">UART_receiveData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">);</span>
    <span class="n">UART_transmitData</span><span class="p">(</span><span class="n">EUSCI_A0_BASE</span><span class="p">,</span><span class="n">receiveByte</span><span class="p">);</span>
</code></pre></div>

<p>DriverLib的底层实现也是通过寄存器来完成的，这样可以通过学习源代码的方式了解某些寄存器的功能，省略某些技术细节，随着处理器执行效率的提高，代码越来越复杂，这样的库函数操作将会非常常见。</p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/08/msp432-uart">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Graphic">
        <h3 class="title-meta">Tag "Graphic":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="library">
        <h3 class="title-meta">Tag "library":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="grlib">
        <h3 class="title-meta">Tag "grlib":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib" title="MSP432 Graphics Library" rel="bookmark">MSP432 Graphics Library</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-10-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/MSP432">MSP432</a>
          
            <a href="https://mypre.cn/categories/MCU">MCU</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/10/18/msp432-grlib#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/10/18/msp432-grlib"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>MSP432提供了对LCD屏操作的库函数，而从整个对LCD的操控来说，自下面上的分成了三层：HAL硬件抽象层，LCD屏的驱动层以及grlib上层图形库。</p>

<p>按照官方文档的介绍grlib库提供了一些上下文控制函数以及一系列简单的图表绘制函数：圆，位图，直线，矩形，字符串，按钮，图像按钮，单选框，多选框，以及位图数据转C格式数据工具。</p>

<p>HAL实现对MCU与LCD之间接口的配置，以及底层LCD控制器的串行通信，实现控制字符与数据字符的传输。
LCD驱动层利用HAL实现LCD的基本元素的绘制（点、直线等的绘制），为 grlib 提供调用接口。</p>

<p>以下为三层架构所对应的头文件，包含各自了所在层的函数原型，以及函数调用的方法</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;ti/grlib/grlib.h&gt;
#include "LcdDriver/Crystalfontz128x128_ST7735.h"
#include "LcdDriver/HAL_MSP_EXP432P401R_Crystalfontz128x128_ST7735.h"
</span></code></pre></div>

<p>LCD的初始化代码一般如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code>    <span class="cm">/* Graphic library context */</span>
    <span class="n">Graphics_Context</span> <span class="n">g_sContext</span><span class="p">;</span>  <span class="c1">//全局上下文
</span>
    <span class="cm">/* Initializes display */</span>
    <span class="n">Crystalfontz128x128_Init</span><span class="p">();</span>   <span class="c1">//驱动层的LCD初始化代码
</span>
    <span class="cm">/* Set default screen orientation */</span>
    <span class="n">Crystalfontz128x128_SetOrientation</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//设置屏幕方向
</span>
    <span class="cm">/* Initializes graphics context */</span>
    <span class="n">Graphics_initContext</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sCrystalfontz128x128_funcs</span><span class="p">);</span> 
    <span class="n">Graphics_setForegroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_BLUE</span><span class="p">);</span>
    <span class="n">Graphics_setBackgroundColor</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="n">GRAPHICS_COLOR_WHITE</span><span class="p">);</span>
    <span class="n">GrContextFontSet</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sContext</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_sFontFixed6x8</span><span class="p">);</span>
</code></pre></div>

<p>可以看出初始化函数调用关系是逐层的，驱动层初始化通过调用HAL层进行硬件初始化，其中包括PortInit、SpiInit与LCD芯片初始化。
PortInit：为TI通用的端口复用配置，针对不同TI芯片电路进行端口的开启与复用，此部分代码同样为通用。</p>

<p>需要定制的只有HAL通信功能引脚的配置：</p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="c1">// Ports from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PORT          GPIO_PORT_P1
#define LCD_SCK_PIN_FUNCTION  GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_MOSI_PORT         GPIO_PORT_P1
#define LCD_MOSI_PIN_FUNCTION GPIO_PRIMARY_MODULE_FUNCTION
#define LCD_RST_PORT          GPIO_PORT_P5
#define LCD_CS_PORT           GPIO_PORT_P5
#define LCD_DC_PORT           GPIO_PORT_P3
</span>
<span class="c1">// Pins from MSP432 connected to LCD
</span><span class="cp">#define LCD_SCK_PIN           GPIO_PIN5
#define LCD_MOSI_PIN          GPIO_PIN6
#define LCD_RST_PIN           GPIO_PIN7
#define LCD_CS_PIN            GPIO_PIN0
#define LCD_DC_PIN            GPIO_PIN7
</span>
<span class="c1">// Definition of USCI base address to be used for SPI communication
</span><span class="cp">#define LCD_EUSCI_BASE        EUSCI_B0_BASE
</span>
</code></pre></div>

<p>grlib的初始化内容则是主要围绕一个g_sContext结构体进行，
Graphics_Context 结构体定义如下：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Graphics_Context</span>
<span class="p">{</span>
    <span class="kt">int32_t</span> <span class="n">size</span><span class="p">;</span>                         <span class="c1">//!&lt; The size of this structure.
</span>    <span class="k">const</span> <span class="n">Graphics_Display</span> <span class="o">*</span><span class="n">display</span><span class="p">;</span>    <span class="c1">//!&lt; The screen onto which drawing operations are performed.
</span>    <span class="n">Graphics_Rectangle</span> <span class="n">clipRegion</span><span class="p">;</span>        <span class="c1">//!&lt; The clipping region to be used when drawing onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">foreground</span><span class="p">;</span>                 <span class="c1">//!&lt; The color used to draw primitives onto the screen.
</span>    <span class="kt">uint32_t</span> <span class="n">background</span><span class="p">;</span>                 <span class="c1">//!&lt; The background color used to draw primitives onto the screen.
</span>    <span class="k">const</span> <span class="n">Graphics_Font</span> <span class="o">*</span><span class="n">font</span><span class="p">;</span>            <span class="c1">//!&lt; The font used to render text onto the screen.
</span><span class="p">}</span> <span class="n">Graphics_Context</span><span class="p">;</span>
</code></pre></div>

<p>Graphics_Display *display结构体包括了特定LCD的宽高信息以及驱动函数指针。由此可以看出，LCD屏与上grlib也是分离的，当硬件更换为不同的LCD时，只需修改对应LCD驱动层函数指针，甚至可以实现LCD热更换。</p>

<p>但三层架构的设计架构移植性较高，牺牲了一部分屏幕控制器的硬件性能。</p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/10/18/msp432-grlib">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="ECNU">
        <h3 class="title-meta">Tag "ECNU":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips" title="北理研究生CTF Reverse 之 mips" rel="bookmark">北理研究生CTF Reverse 之 mips</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-12-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这次北理面向在读研究生举办CTF大赛，直接线下赛，时长12小时，其中选择填空1小时，关卡题2小时（之后加时2小时），9小时攻防，攻防赛题在先知安全有提到。</p>

<p>由于第一届，邀请的学校队伍属于中等偏下水平。最后，24支队伍只有9个分数为正，另有近一半左右队伍线下攻防没有拿分。</p>

<p>主办方声称原则上不提供外网环境。</p>

<p>逆向题只有一道，而且为mips架构第一次遇到。手上没有运行环境，只能静态调，花了一个多小时才搞清楚流程，之后时间不够只能做罢，后来发现当场也没有人做出。</p>

<p>赛后再分析一遍其实还是挺简单的。</p>

<p>先附上解密代码，回舍，日后有时间再补。</p>

<p>程序： <a href="/post_res/ctf_bit_wp/mips">mips</a></p>

<p><img src="/post_res/ctf_bit_wp/bit-ctf-reverse-mips-1.png" alt="gdb-reverse-key" /></p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
</span>

<span class="kt">void</span> <span class="nf">dec</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">val</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">delta</span> <span class="o">=</span> <span class="mh">0x9e3779B9</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sum</span> <span class="o">=</span> <span class="mh">0xb8ab04e8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">v0</span><span class="o">=</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">v1</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v0</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v0</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v0</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[(</span><span class="n">sum</span> <span class="o">&gt;&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
		<span class="n">sum</span> <span class="o">-=</span> <span class="n">delta</span><span class="p">;</span>
		<span class="n">v0</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v1</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v1</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="n">sum</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"0x%x~~~</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v0</span><span class="p">;</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v1</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x2bc12411</span><span class="p">,</span> <span class="mh">0x0deadbee</span><span class="p">,</span> <span class="mh">0x0276630b</span><span class="p">,</span> <span class="mh">0x014f53f5</span>
		<span class="p">};</span>
	<span class="kt">uint32_t</span> <span class="n">value</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x9a5e3731</span><span class="p">,</span> <span class="mh">0x2ed28785</span><span class="p">,</span>
		<span class="mh">0xeb26da7d</span><span class="p">,</span> <span class="mh">0x82b06241</span><span class="p">,</span>
		<span class="mh">0x21d9dcd4</span><span class="p">,</span> <span class="mh">0x44bdda49</span><span class="p">,</span>
		<span class="mh">0x15f62308</span><span class="p">,</span> <span class="mh">0x7b0546ee</span><span class="p">,</span>
		<span class="mh">0xf6b4a519</span><span class="p">,</span> <span class="mh">0x71c0d531</span>
		<span class="p">};</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">key</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="c1">//printf("0x%8x, 0x%8x\n", value[0], value[1]);
</span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	
<span class="p">}</span>

</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2" title="华师大CTF逆向题分析之Draw It（Monster）" rel="bookmark">华师大CTF逆向题分析之Draw It（Monster）</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-2"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h1 id="draw-itmonster">Draw It（Monster）</h1>

<p>程序打开运行界面：</p>

<p><img src="/post_res/ctf_wp/draw_it_1.png" alt="draw_it_1" /></p>

<p>查壳发现为UPX压缩壳，UPX壳代码是开源的，加壳脱壳是同一个程序。</p>

<p><img src="/post_res/ctf_wp/draw_it_2.png" alt="draw_it_2" /></p>

<p>手脱ESP定律，或者往下找popad接着一个大跳可以直接到程序OEP。
手脱比较节省时间，但是有一些区段或者其它信息没法还原。</p>

<p><img src="/post_res/ctf_wp/draw_it_3.png" alt="draw_it_3" /></p>

<p>脱壳之后用IDA分析来到程序消息处理函数找到关键位置：</p>

<p><img src="/post_res/ctf_wp/draw_it_4.png" alt="draw_it_4" /></p>

<p>通过分析，程序取所画图片的连续相同的点的个数与cmp数据做对比，
猜测cmp数据为Flag相关数据，存储了Flag图片的一些信息，即bitmap方式连续相同的点的个数。
因为位图是24位，每个像素点用3位来存储，所以比较的时候需要乘3。</p>

<p>导出数据：</p>

<p><img src="/post_res/ctf_wp/draw_it_5.png" alt="draw_it_5" /></p>

<p>进一步验证,将数据全部相加得到30000(50*600)，确定了之前的分析。</p>

<p>编写Win32程序，解析数据：</p>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cmp_i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">600</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">sum</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="k">if</span><span class="p">(</span>  <span class="n">odd</span> <span class="p">)</span>
				<span class="n">SetPixel</span><span class="p">(</span><span class="n">hdc</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="mi">50</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">RGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span><span class="c1">//BMP从上到下，从左到右存贮
</span>		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">odd</span> <span class="o">=</span> <span class="o">!</span><span class="n">odd</span><span class="p">;</span>
			<span class="n">all</span><span class="o">+=</span><span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">]</span> <span class="p">;</span>
			<span class="n">cmp_i</span><span class="o">++</span><span class="p">;</span>
			
		<span class="p">}</span>

	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div>

<p>可以得到结果：</p>

<p><img src="/post_res/ctf_wp/draw_it_6.png" alt="draw_it_6" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1" title="华师大CTF逆向题分析之巴黎解密" rel="bookmark">华师大CTF逆向题分析之巴黎解密</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-1"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>预赛逆向题有三道
第一道为巴黎解密ctf文件
第二道为画出FLAG
第三道为Stephen</p>

<p>决赛逆向题有四道，只做出了前两题。
第一题为MFC程序跑不起来
第二道为Elf64、STL对素数表加密
第三道使用 VirtualProtect 反调试。
第四道使用了一个linux程序对数据进行封装，没时间做。
前两道相对简单</p>

<h3 id="巴黎解密ctf文件">巴黎解密ctf文件</h3>

<blockquote>
  <p>有个文件加密工具，能将一个文件加密到一个.ctf文件中去。</p>

  <p>有一个犯罪分子将存有犯罪记录的一个名为“CTFtest.ctf”
的加密文件被删除了。现经过数据恢复，我们已经恢复了该文件。</p>

  <p>但是很不幸，该文件头部的部分数据已经被覆盖掉了。这个.ctf文件已经不能正常打开了。
而且加密该文件的口令，犯罪分子也不愿意交代，我们只知道他惯用的口令是一个8位纯数字口令。</p>

  <p>请选手下载http://ctf.ecnu.edu.cn/question/attachment1.zip</p>

  <p>通过其中的.ctf文件以及解密程序最大限度地恢复出文件中的内容，flag就在里面。
Flag形式为大写32位md5。</p>
</blockquote>

<p>题目给出了一个解密程序以及一个加密后丢失了一部分文件头的文件</p>

<p>如图：</p>

<p><img src="/post_res/ctf_wp/final_re_1.png" alt="final_re_1" /></p>

<p>目测丢失了前35bytes的数据</p>

<p>解密程序无壳无花，直接IDA，MFC静态库编译。</p>

<p>结合导入表以及程序运行来看，调用了CreateFile、ReadFile、MessageBox等参数，</p>

<p>顺利跟踪到了程序关键地址 0x402570
分析函数，局部变量比较多，</p>

<p><img src="/post_res/ctf_wp/final_re_2.png" alt="final_re_2" /></p>

<p>应该八九不十了。
接着分析：</p>

<p><img src="/post_res/ctf_wp/final_re_3.png" alt="final_re_3" /></p>

<p>程序打开文件，判断前4 bytes 内容为 0x33465443 转换为字符<code class="highlighter-rouge">CTF3</code></p>

<p><img src="/post_res/ctf_wp/final_re_4.jpg" alt="final_re_4" /></p>

<p>接着读4bytes转为DWORD型，为接下来要读取的长度并存储。
接着读文件16字节，取密码框内容，
将密码进行两次MD5加密，将结果与取到的16字节进行对比。</p>

<p><img src="/post_res/ctf_wp/final_re_5.png" alt="final_re_5" /></p>

<p>接着读4bytes转为DWORD型，做为接下来要读取的长度，再次读取，然后关闭文件。</p>

<p>至此，加密文件全部读取完毕，小结一下文件结构：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>4 bytes 为固定字符‘CTF3’
4 bytes 为len of head
{...}   为head
16 bytes 将密码经两次MD5加密的密文
4 bytes 为len of body
{...}   为body
</code></pre></div>

<p>此时回过头来分析.ctf加密文件内容。</p>

<p><img src="/post_res/ctf_wp/final_re_6.png" alt="final_re_6" /></p>

<p>发现偏移为0x29位置4bytes的内容为0x0000619C，这一部分正好对应为文件此后的长度，
可以推定为<code class="highlighter-rouge">len_of_body</code>存储位置。向前16bytes为MD5密文区域，并且只有6bytes保留。</p>

<p>根据提示，密码为8位数字，通过这一部分MD5，应该可以还原。
编写程序：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include "md5.h"
</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0x48</span><span class="p">,</span>  <span class="mh">0xB1</span><span class="p">,</span>  <span class="mh">0xED</span><span class="p">,</span>  <span class="mh">0x05</span><span class="p">,</span>  <span class="mh">0x8D</span><span class="p">,</span>  <span class="mh">0xF7</span> <span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">a</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">c</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

	<span class="k">for</span><span class="p">(</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">99999999</span><span class="p">;</span> <span class="n">num</span><span class="o">++</span><span class="p">){</span>
		<span class="n">_itoa</span><span class="p">(</span><span class="n">num</span><span class="p">,(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
		<span class="n">MD5_CTX</span> <span class="n">md5</span><span class="p">;</span>

		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">));</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
		
		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>

		<span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		<span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">i</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">l</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nl">l:</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"pause"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div>

<p>程序跑出密码为<code class="highlighter-rouge">20160610</code>。
此时还剩11bytes的head内容不知道。</p>

<p><img src="/post_res/ctf_wp/final_re_7.png" alt="final_re_7" /></p>

<p>接着查找程序对head部分的引用，发现程序对head沁使用多字节字符转宽字符库函数。
进行字符串拼接之后，传入CreateFile。
由此可以断定，head部分内容为加密文件的文件名。</p>

<p>至此我们可以对加密文件的分析，基本结束，将文件头丢失部分恢复，Head部分随便指定一个文件名。
解密程序将文件恢复：</p>

<p><img src="/post_res/ctf_wp/final_re_8.jpg" alt="final_re_8" /></p>

<p>得到一个压缩包文件，查看内容为Word文件，打开得到Flag。</p>

<p><img src="/post_res/ctf_wp/final_re_9.jpg" alt="final_re_9" /></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="CTF">
        <h3 class="title-meta">Tag "CTF":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2" title="华师大CTF逆向题分析之Draw It（Monster）" rel="bookmark">华师大CTF逆向题分析之Draw It（Monster）</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-2"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h1 id="draw-itmonster">Draw It（Monster）</h1>

<p>程序打开运行界面：</p>

<p><img src="/post_res/ctf_wp/draw_it_1.png" alt="draw_it_1" /></p>

<p>查壳发现为UPX压缩壳，UPX壳代码是开源的，加壳脱壳是同一个程序。</p>

<p><img src="/post_res/ctf_wp/draw_it_2.png" alt="draw_it_2" /></p>

<p>手脱ESP定律，或者往下找popad接着一个大跳可以直接到程序OEP。
手脱比较节省时间，但是有一些区段或者其它信息没法还原。</p>

<p><img src="/post_res/ctf_wp/draw_it_3.png" alt="draw_it_3" /></p>

<p>脱壳之后用IDA分析来到程序消息处理函数找到关键位置：</p>

<p><img src="/post_res/ctf_wp/draw_it_4.png" alt="draw_it_4" /></p>

<p>通过分析，程序取所画图片的连续相同的点的个数与cmp数据做对比，
猜测cmp数据为Flag相关数据，存储了Flag图片的一些信息，即bitmap方式连续相同的点的个数。
因为位图是24位，每个像素点用3位来存储，所以比较的时候需要乘3。</p>

<p>导出数据：</p>

<p><img src="/post_res/ctf_wp/draw_it_5.png" alt="draw_it_5" /></p>

<p>进一步验证,将数据全部相加得到30000(50*600)，确定了之前的分析。</p>

<p>编写Win32程序，解析数据：</p>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cmp_i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">600</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">sum</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="k">if</span><span class="p">(</span>  <span class="n">odd</span> <span class="p">)</span>
				<span class="n">SetPixel</span><span class="p">(</span><span class="n">hdc</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="mi">50</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">RGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span><span class="c1">//BMP从上到下，从左到右存贮
</span>		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">odd</span> <span class="o">=</span> <span class="o">!</span><span class="n">odd</span><span class="p">;</span>
			<span class="n">all</span><span class="o">+=</span><span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">]</span> <span class="p">;</span>
			<span class="n">cmp_i</span><span class="o">++</span><span class="p">;</span>
			
		<span class="p">}</span>

	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div>

<p>可以得到结果：</p>

<p><img src="/post_res/ctf_wp/draw_it_6.png" alt="draw_it_6" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1" title="华师大CTF逆向题分析之巴黎解密" rel="bookmark">华师大CTF逆向题分析之巴黎解密</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-1"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>预赛逆向题有三道
第一道为巴黎解密ctf文件
第二道为画出FLAG
第三道为Stephen</p>

<p>决赛逆向题有四道，只做出了前两题。
第一题为MFC程序跑不起来
第二道为Elf64、STL对素数表加密
第三道使用 VirtualProtect 反调试。
第四道使用了一个linux程序对数据进行封装，没时间做。
前两道相对简单</p>

<h3 id="巴黎解密ctf文件">巴黎解密ctf文件</h3>

<blockquote>
  <p>有个文件加密工具，能将一个文件加密到一个.ctf文件中去。</p>

  <p>有一个犯罪分子将存有犯罪记录的一个名为“CTFtest.ctf”
的加密文件被删除了。现经过数据恢复，我们已经恢复了该文件。</p>

  <p>但是很不幸，该文件头部的部分数据已经被覆盖掉了。这个.ctf文件已经不能正常打开了。
而且加密该文件的口令，犯罪分子也不愿意交代，我们只知道他惯用的口令是一个8位纯数字口令。</p>

  <p>请选手下载http://ctf.ecnu.edu.cn/question/attachment1.zip</p>

  <p>通过其中的.ctf文件以及解密程序最大限度地恢复出文件中的内容，flag就在里面。
Flag形式为大写32位md5。</p>
</blockquote>

<p>题目给出了一个解密程序以及一个加密后丢失了一部分文件头的文件</p>

<p>如图：</p>

<p><img src="/post_res/ctf_wp/final_re_1.png" alt="final_re_1" /></p>

<p>目测丢失了前35bytes的数据</p>

<p>解密程序无壳无花，直接IDA，MFC静态库编译。</p>

<p>结合导入表以及程序运行来看，调用了CreateFile、ReadFile、MessageBox等参数，</p>

<p>顺利跟踪到了程序关键地址 0x402570
分析函数，局部变量比较多，</p>

<p><img src="/post_res/ctf_wp/final_re_2.png" alt="final_re_2" /></p>

<p>应该八九不十了。
接着分析：</p>

<p><img src="/post_res/ctf_wp/final_re_3.png" alt="final_re_3" /></p>

<p>程序打开文件，判断前4 bytes 内容为 0x33465443 转换为字符<code class="highlighter-rouge">CTF3</code></p>

<p><img src="/post_res/ctf_wp/final_re_4.jpg" alt="final_re_4" /></p>

<p>接着读4bytes转为DWORD型，为接下来要读取的长度并存储。
接着读文件16字节，取密码框内容，
将密码进行两次MD5加密，将结果与取到的16字节进行对比。</p>

<p><img src="/post_res/ctf_wp/final_re_5.png" alt="final_re_5" /></p>

<p>接着读4bytes转为DWORD型，做为接下来要读取的长度，再次读取，然后关闭文件。</p>

<p>至此，加密文件全部读取完毕，小结一下文件结构：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>4 bytes 为固定字符‘CTF3’
4 bytes 为len of head
{...}   为head
16 bytes 将密码经两次MD5加密的密文
4 bytes 为len of body
{...}   为body
</code></pre></div>

<p>此时回过头来分析.ctf加密文件内容。</p>

<p><img src="/post_res/ctf_wp/final_re_6.png" alt="final_re_6" /></p>

<p>发现偏移为0x29位置4bytes的内容为0x0000619C，这一部分正好对应为文件此后的长度，
可以推定为<code class="highlighter-rouge">len_of_body</code>存储位置。向前16bytes为MD5密文区域，并且只有6bytes保留。</p>

<p>根据提示，密码为8位数字，通过这一部分MD5，应该可以还原。
编写程序：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include "md5.h"
</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0x48</span><span class="p">,</span>  <span class="mh">0xB1</span><span class="p">,</span>  <span class="mh">0xED</span><span class="p">,</span>  <span class="mh">0x05</span><span class="p">,</span>  <span class="mh">0x8D</span><span class="p">,</span>  <span class="mh">0xF7</span> <span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">a</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">c</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

	<span class="k">for</span><span class="p">(</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">99999999</span><span class="p">;</span> <span class="n">num</span><span class="o">++</span><span class="p">){</span>
		<span class="n">_itoa</span><span class="p">(</span><span class="n">num</span><span class="p">,(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
		<span class="n">MD5_CTX</span> <span class="n">md5</span><span class="p">;</span>

		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">));</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
		
		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>

		<span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		<span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">i</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">l</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nl">l:</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"pause"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div>

<p>程序跑出密码为<code class="highlighter-rouge">20160610</code>。
此时还剩11bytes的head内容不知道。</p>

<p><img src="/post_res/ctf_wp/final_re_7.png" alt="final_re_7" /></p>

<p>接着查找程序对head部分的引用，发现程序对head沁使用多字节字符转宽字符库函数。
进行字符串拼接之后，传入CreateFile。
由此可以断定，head部分内容为加密文件的文件名。</p>

<p>至此我们可以对加密文件的分析，基本结束，将文件头丢失部分恢复，Head部分随便指定一个文件名。
解密程序将文件恢复：</p>

<p><img src="/post_res/ctf_wp/final_re_8.jpg" alt="final_re_8" /></p>

<p>得到一个压缩包文件，查看内容为Word文件，打开得到Flag。</p>

<p><img src="/post_res/ctf_wp/final_re_9.jpg" alt="final_re_9" /></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="逆向">
        <h3 class="title-meta">Tag "逆向":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2" title="华师大CTF逆向题分析之Draw It（Monster）" rel="bookmark">华师大CTF逆向题分析之Draw It（Monster）</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-2"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <h1 id="draw-itmonster">Draw It（Monster）</h1>

<p>程序打开运行界面：</p>

<p><img src="/post_res/ctf_wp/draw_it_1.png" alt="draw_it_1" /></p>

<p>查壳发现为UPX压缩壳，UPX壳代码是开源的，加壳脱壳是同一个程序。</p>

<p><img src="/post_res/ctf_wp/draw_it_2.png" alt="draw_it_2" /></p>

<p>手脱ESP定律，或者往下找popad接着一个大跳可以直接到程序OEP。
手脱比较节省时间，但是有一些区段或者其它信息没法还原。</p>

<p><img src="/post_res/ctf_wp/draw_it_3.png" alt="draw_it_3" /></p>

<p>脱壳之后用IDA分析来到程序消息处理函数找到关键位置：</p>

<p><img src="/post_res/ctf_wp/draw_it_4.png" alt="draw_it_4" /></p>

<p>通过分析，程序取所画图片的连续相同的点的个数与cmp数据做对比，
猜测cmp数据为Flag相关数据，存储了Flag图片的一些信息，即bitmap方式连续相同的点的个数。
因为位图是24位，每个像素点用3位来存储，所以比较的时候需要乘3。</p>

<p>导出数据：</p>

<p><img src="/post_res/ctf_wp/draw_it_5.png" alt="draw_it_5" /></p>

<p>进一步验证,将数据全部相加得到30000(50*600)，确定了之前的分析。</p>

<p>编写Win32程序，解析数据：</p>

<div class="language-cpp highlighter-rouge"><pre class="highlight"><code><span class="kt">int</span> <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">cmp_i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">50</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="mi">600</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">sum</span><span class="o">++</span><span class="p">;</span>
		<span class="k">if</span><span class="p">(</span><span class="n">sum</span> <span class="o">&lt;</span> <span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="k">if</span><span class="p">(</span>  <span class="n">odd</span> <span class="p">)</span>
				<span class="n">SetPixel</span><span class="p">(</span><span class="n">hdc</span><span class="p">,</span><span class="n">j</span><span class="p">,</span> <span class="mi">50</span><span class="o">-</span><span class="n">i</span><span class="p">,</span><span class="n">RGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span><span class="c1">//BMP从上到下，从左到右存贮
</span>		<span class="p">}</span>
		<span class="k">else</span>
		<span class="p">{</span>
			<span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="n">odd</span> <span class="o">=</span> <span class="o">!</span><span class="n">odd</span><span class="p">;</span>
			<span class="n">all</span><span class="o">+=</span><span class="n">cmp</span><span class="p">[</span><span class="n">cmp_i</span><span class="p">]</span> <span class="p">;</span>
			<span class="n">cmp_i</span><span class="o">++</span><span class="p">;</span>
			
		<span class="p">}</span>

	<span class="p">}</span>
<span class="p">}</span>

</code></pre></div>

<p>可以得到结果：</p>

<p><img src="/post_res/ctf_wp/draw_it_6.png" alt="draw_it_6" /></p>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-2">Read More</a>
    </div>
  </footer>
</article>


      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1" title="华师大CTF逆向题分析之巴黎解密" rel="bookmark">华师大CTF逆向题分析之巴黎解密</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-15</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/15/ecnu-ctf-1"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>预赛逆向题有三道
第一道为巴黎解密ctf文件
第二道为画出FLAG
第三道为Stephen</p>

<p>决赛逆向题有四道，只做出了前两题。
第一题为MFC程序跑不起来
第二道为Elf64、STL对素数表加密
第三道使用 VirtualProtect 反调试。
第四道使用了一个linux程序对数据进行封装，没时间做。
前两道相对简单</p>

<h3 id="巴黎解密ctf文件">巴黎解密ctf文件</h3>

<blockquote>
  <p>有个文件加密工具，能将一个文件加密到一个.ctf文件中去。</p>

  <p>有一个犯罪分子将存有犯罪记录的一个名为“CTFtest.ctf”
的加密文件被删除了。现经过数据恢复，我们已经恢复了该文件。</p>

  <p>但是很不幸，该文件头部的部分数据已经被覆盖掉了。这个.ctf文件已经不能正常打开了。
而且加密该文件的口令，犯罪分子也不愿意交代，我们只知道他惯用的口令是一个8位纯数字口令。</p>

  <p>请选手下载http://ctf.ecnu.edu.cn/question/attachment1.zip</p>

  <p>通过其中的.ctf文件以及解密程序最大限度地恢复出文件中的内容，flag就在里面。
Flag形式为大写32位md5。</p>
</blockquote>

<p>题目给出了一个解密程序以及一个加密后丢失了一部分文件头的文件</p>

<p>如图：</p>

<p><img src="/post_res/ctf_wp/final_re_1.png" alt="final_re_1" /></p>

<p>目测丢失了前35bytes的数据</p>

<p>解密程序无壳无花，直接IDA，MFC静态库编译。</p>

<p>结合导入表以及程序运行来看，调用了CreateFile、ReadFile、MessageBox等参数，</p>

<p>顺利跟踪到了程序关键地址 0x402570
分析函数，局部变量比较多，</p>

<p><img src="/post_res/ctf_wp/final_re_2.png" alt="final_re_2" /></p>

<p>应该八九不十了。
接着分析：</p>

<p><img src="/post_res/ctf_wp/final_re_3.png" alt="final_re_3" /></p>

<p>程序打开文件，判断前4 bytes 内容为 0x33465443 转换为字符<code class="highlighter-rouge">CTF3</code></p>

<p><img src="/post_res/ctf_wp/final_re_4.jpg" alt="final_re_4" /></p>

<p>接着读4bytes转为DWORD型，为接下来要读取的长度并存储。
接着读文件16字节，取密码框内容，
将密码进行两次MD5加密，将结果与取到的16字节进行对比。</p>

<p><img src="/post_res/ctf_wp/final_re_5.png" alt="final_re_5" /></p>

<p>接着读4bytes转为DWORD型，做为接下来要读取的长度，再次读取，然后关闭文件。</p>

<p>至此，加密文件全部读取完毕，小结一下文件结构：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>4 bytes 为固定字符‘CTF3’
4 bytes 为len of head
{...}   为head
16 bytes 将密码经两次MD5加密的密文
4 bytes 为len of body
{...}   为body
</code></pre></div>

<p>此时回过头来分析.ctf加密文件内容。</p>

<p><img src="/post_res/ctf_wp/final_re_6.png" alt="final_re_6" /></p>

<p>发现偏移为0x29位置4bytes的内容为0x0000619C，这一部分正好对应为文件此后的长度，
可以推定为<code class="highlighter-rouge">len_of_body</code>存储位置。向前16bytes为MD5密文区域，并且只有6bytes保留。</p>

<p>根据提示，密码为8位数字，通过这一部分MD5，应该可以还原。
编写程序：</p>
<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;
#include "md5.h"
</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0x48</span><span class="p">,</span>  <span class="mh">0xB1</span><span class="p">,</span>  <span class="mh">0xED</span><span class="p">,</span>  <span class="mh">0x05</span><span class="p">,</span>  <span class="mh">0x8D</span><span class="p">,</span>  <span class="mh">0xF7</span> <span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">unsigned</span> <span class="kt">char</span>  <span class="n">a</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">b</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">},</span><span class="n">c</span><span class="p">[</span><span class="mi">17</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
	<span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

	<span class="k">for</span><span class="p">(</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="mi">99999999</span><span class="p">;</span> <span class="n">num</span><span class="o">++</span><span class="p">){</span>
		<span class="n">_itoa</span><span class="p">(</span><span class="n">num</span><span class="p">,(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
		<span class="n">MD5_CTX</span> <span class="n">md5</span><span class="p">;</span>

		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">));</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
		
		<span class="n">MD5Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">);</span>                
		<span class="n">MD5Update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="mi">16</span><span class="p">);</span>  
		<span class="n">MD5Final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">md5</span><span class="p">,</span><span class="n">c</span><span class="p">);</span>

		<span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
		<span class="k">while</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">10</span><span class="p">])</span>
		<span class="p">{</span>
			<span class="n">i</span><span class="o">++</span><span class="p">;</span>
			<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&gt;=</span><span class="mi">6</span><span class="p">)</span>
				<span class="k">goto</span> <span class="n">l</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="nl">l:</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="n">num</span><span class="p">);</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">getchar</span><span class="p">();</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"pause"</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">1</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div>

<p>程序跑出密码为<code class="highlighter-rouge">20160610</code>。
此时还剩11bytes的head内容不知道。</p>

<p><img src="/post_res/ctf_wp/final_re_7.png" alt="final_re_7" /></p>

<p>接着查找程序对head部分的引用，发现程序对head沁使用多字节字符转宽字符库函数。
进行字符串拼接之后，传入CreateFile。
由此可以断定，head部分内容为加密文件的文件名。</p>

<p>至此我们可以对加密文件的分析，基本结束，将文件头丢失部分恢复，Head部分随便指定一个文件名。
解密程序将文件恢复：</p>

<p><img src="/post_res/ctf_wp/final_re_8.jpg" alt="final_re_8" /></p>

<p>得到一个压缩包文件，查看内容为Word文件，打开得到Flag。</p>

<p><img src="/post_res/ctf_wp/final_re_9.jpg" alt="final_re_9" /></p>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/15/ecnu-ctf-1">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="ArchLinux">
        <h3 class="title-meta">Tag "ArchLinux":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound" title="Linux Sound Server" rel="bookmark">Linux Sound Server</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-11-20</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/11/20/archlinux-dwm-sound"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>ArchLinux下使用DWM有两个月了，但是声音模块一直是很大的问题。</p>

<p>一开始以为DELL Vsion3668的声卡驱动不同寻常，毕竟之前在Windows下的驱动就装了老费劲了。</p>

<p>之前CTF校赛加上嵌入式论文讨论班一阵忙活，空出时间继续搞ArchLinux，没有声音一直很难受。</p>

<p>查文档发现原来是pulseaudio没有启动，这是Linux下的声音Server。</p>

<p>Linux下的声音系统比较杂，现今多数使用ALSA;</p>

<p>ALSA是一个集成了声卡驱动和底层接口的东西，而pulseaudio是声音服务器，应用程序要想输出声音需要往pulseaudio里边送。</p>

<p>于是:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code>vim ~/.xinitrc
</code></pre></div>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>pulseaudio --start
</code></pre></div>

<p>启动声间服务器。</p>

<p>参考：</p>
<blockquote>
  <p>https://wiki.archlinux.org/index.php/Sound_system
https://wiki.archlinux.org/index.php/Advanced_Linux_Sound_Architecture</p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/11/20/archlinux-dwm-sound">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="BIT">
        <h3 class="title-meta">Tag "BIT":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips" title="北理研究生CTF Reverse 之 mips" rel="bookmark">北理研究生CTF Reverse 之 mips</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-12-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这次北理面向在读研究生举办CTF大赛，直接线下赛，时长12小时，其中选择填空1小时，关卡题2小时（之后加时2小时），9小时攻防，攻防赛题在先知安全有提到。</p>

<p>由于第一届，邀请的学校队伍属于中等偏下水平。最后，24支队伍只有9个分数为正，另有近一半左右队伍线下攻防没有拿分。</p>

<p>主办方声称原则上不提供外网环境。</p>

<p>逆向题只有一道，而且为mips架构第一次遇到。手上没有运行环境，只能静态调，花了一个多小时才搞清楚流程，之后时间不够只能做罢，后来发现当场也没有人做出。</p>

<p>赛后再分析一遍其实还是挺简单的。</p>

<p>先附上解密代码，回舍，日后有时间再补。</p>

<p>程序： <a href="/post_res/ctf_bit_wp/mips">mips</a></p>

<p><img src="/post_res/ctf_bit_wp/bit-ctf-reverse-mips-1.png" alt="gdb-reverse-key" /></p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
</span>

<span class="kt">void</span> <span class="nf">dec</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">val</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">delta</span> <span class="o">=</span> <span class="mh">0x9e3779B9</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sum</span> <span class="o">=</span> <span class="mh">0xb8ab04e8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">v0</span><span class="o">=</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">v1</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v0</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v0</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v0</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[(</span><span class="n">sum</span> <span class="o">&gt;&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
		<span class="n">sum</span> <span class="o">-=</span> <span class="n">delta</span><span class="p">;</span>
		<span class="n">v0</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v1</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v1</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="n">sum</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"0x%x~~~</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v0</span><span class="p">;</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v1</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x2bc12411</span><span class="p">,</span> <span class="mh">0x0deadbee</span><span class="p">,</span> <span class="mh">0x0276630b</span><span class="p">,</span> <span class="mh">0x014f53f5</span>
		<span class="p">};</span>
	<span class="kt">uint32_t</span> <span class="n">value</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x9a5e3731</span><span class="p">,</span> <span class="mh">0x2ed28785</span><span class="p">,</span>
		<span class="mh">0xeb26da7d</span><span class="p">,</span> <span class="mh">0x82b06241</span><span class="p">,</span>
		<span class="mh">0x21d9dcd4</span><span class="p">,</span> <span class="mh">0x44bdda49</span><span class="p">,</span>
		<span class="mh">0x15f62308</span><span class="p">,</span> <span class="mh">0x7b0546ee</span><span class="p">,</span>
		<span class="mh">0xf6b4a519</span><span class="p">,</span> <span class="mh">0x71c0d531</span>
		<span class="p">};</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">key</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="c1">//printf("0x%8x, 0x%8x\n", value[0], value[1]);
</span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	
<span class="p">}</span>

</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Reverse">
        <h3 class="title-meta">Tag "Reverse":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips" title="北理研究生CTF Reverse 之 mips" rel="bookmark">北理研究生CTF Reverse 之 mips</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2017-12-18</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/CTF">CTF</a>
          
            <a href="https://mypre.cn/categories/逆向">逆向</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这次北理面向在读研究生举办CTF大赛，直接线下赛，时长12小时，其中选择填空1小时，关卡题2小时（之后加时2小时），9小时攻防，攻防赛题在先知安全有提到。</p>

<p>由于第一届，邀请的学校队伍属于中等偏下水平。最后，24支队伍只有9个分数为正，另有近一半左右队伍线下攻防没有拿分。</p>

<p>主办方声称原则上不提供外网环境。</p>

<p>逆向题只有一道，而且为mips架构第一次遇到。手上没有运行环境，只能静态调，花了一个多小时才搞清楚流程，之后时间不够只能做罢，后来发现当场也没有人做出。</p>

<p>赛后再分析一遍其实还是挺简单的。</p>

<p>先附上解密代码，回舍，日后有时间再补。</p>

<p>程序： <a href="/post_res/ctf_bit_wp/mips">mips</a></p>

<p><img src="/post_res/ctf_bit_wp/bit-ctf-reverse-mips-1.png" alt="gdb-reverse-key" /></p>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp">#include &lt;stdint.h&gt;
#include &lt;stdio.h&gt;
</span>

<span class="kt">void</span> <span class="nf">dec</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">val</span><span class="p">,</span> <span class="kt">uint32_t</span> <span class="o">*</span><span class="n">k</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">delta</span> <span class="o">=</span> <span class="mh">0x9e3779B9</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">sum</span> <span class="o">=</span> <span class="mh">0xb8ab04e8</span><span class="p">;</span>
	<span class="kt">uint32_t</span> <span class="n">v1</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">v0</span><span class="o">=</span><span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">40</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">v1</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v0</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v0</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v0</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[(</span><span class="n">sum</span> <span class="o">&gt;&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
		<span class="n">sum</span> <span class="o">-=</span> <span class="n">delta</span><span class="p">;</span>
		<span class="n">v0</span> <span class="o">-=</span> <span class="p">((</span><span class="n">v1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">^</span> <span class="n">v1</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">v1</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">k</span><span class="p">[</span><span class="n">sum</span> <span class="o">&amp;</span> <span class="mi">3</span><span class="p">]);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"0x%x~~~</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sum</span><span class="p">);</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v0</span><span class="p">;</span>
	<span class="n">val</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v1</span><span class="p">;</span>

	<span class="k">return</span> <span class="p">;</span>

<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
	<span class="kt">uint32_t</span> <span class="n">key</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x2bc12411</span><span class="p">,</span> <span class="mh">0x0deadbee</span><span class="p">,</span> <span class="mh">0x0276630b</span><span class="p">,</span> <span class="mh">0x014f53f5</span>
		<span class="p">};</span>
	<span class="kt">uint32_t</span> <span class="n">value</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span>
		<span class="mh">0x9a5e3731</span><span class="p">,</span> <span class="mh">0x2ed28785</span><span class="p">,</span>
		<span class="mh">0xeb26da7d</span><span class="p">,</span> <span class="mh">0x82b06241</span><span class="p">,</span>
		<span class="mh">0x21d9dcd4</span><span class="p">,</span> <span class="mh">0x44bdda49</span><span class="p">,</span>
		<span class="mh">0x15f62308</span><span class="p">,</span> <span class="mh">0x7b0546ee</span><span class="p">,</span>
		<span class="mh">0xf6b4a519</span><span class="p">,</span> <span class="mh">0x71c0d531</span>
		<span class="p">};</span>
	<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span><span class="mi">2</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">dec</span><span class="p">(</span><span class="o">&amp;</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">key</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
	<span class="c1">//printf("0x%8x, 0x%8x\n", value[0], value[1]);
</span>	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
	
<span class="p">}</span>

</code></pre></div>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2017/12/18/bit-ctf-reverse-mips">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Linux">
        <h3 class="title-meta">Tag "Linux":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Ubuntu">
        <h3 class="title-meta">Tag "Ubuntu":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="zesty">
        <h3 class="title-meta">Tag "zesty":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="apt">
        <h3 class="title-meta">Tag "apt":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="release">
        <h3 class="title-meta">Tag "release":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail" title="Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file" rel="bookmark">Ubuntu 17.04 apt 无法更新，repository '...' does not have a Release file</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-21</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>这阵子打算换Arch的时候，想在Ubuntu最后折腾一番，没想到apt update的时候出现了其怪的事情。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>lanbing@LanBing-Ubuntu:~$ sudo apt update
Hit:1 http://ppa.launchpad.net/webupd8team/sublime-text-3/ubuntu zesty InRelease
Ign:2 http://cn.archive.ubuntu.com/ubuntu zesty InRelease
Ign:3 http://cn.archive.ubuntu.com/ubuntu zesty-security InRelease
Ign:4 http://cn.archive.ubuntu.com/ubuntu zesty-updates InRelease
Err:5 http://cn.archive.ubuntu.com/ubuntu zesty Release
  404  Not Found [IP: 91.189.91.23 80]
Err:6 http://cn.archive.ubuntu.com/ubuntu zesty-security Release
  404  Not Found [IP: 91.189.91.23 80]
Err:7 http://cn.archive.ubuntu.com/ubuntu zesty-updates Release
  404  Not Found [IP: 91.189.91.23 80]
Reading package lists... Done
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-security Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
E: The repository 'http://cn.archive.ubuntu.com/ubuntu zesty-updates Release' does not have a Release file.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.
</code></pre></div>

<p>尝试了国内的几个主流源：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>https://mirrors.tuna.tsinghua.edu.cn/ubuntu/
http://mirrors.aliyun.com/ubuntu/
http://ftp.sjtu.edu.cn/ubuntu/
</code></pre></div>
<p>均出现了类似的错误，后改为官方的源，同样出现此错误，还莫名其妙多出几百个Ign。
仔细到源目录下分析
发现确实不存在http://cn.archive.ubuntu.com/ubuntu/dists/zesty/Release</p>

<p>原来官方把17.04 zesty这个版本的源移到了old-release。
然而国内大部分源也是同步了官方的源，导致了找不到相关源的信息。</p>

<p>遂将source.list源修改成官方的</p>
<div class="highlighter-rouge"><pre class="highlight"><code>http://old-releases.ubuntu.com/ubuntu
</code></pre></div>
<p>于是apt update可以顺利更新了。</p>

<p>但问题又来了，由于官方的源在国外，更新速度太慢，眼看着50M的带宽不满足于此。</p>

<p>最后，发现中科大的镜像源提供了old-release，于是：</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo vi /etc/apt/source.list

将源地址换为：
http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu



lanbing@LanBing-Ubuntu:~$ cat /etc/apt/sources.list
###### Ubuntu Main Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty main universe 

###### Ubuntu Update Repos
deb http://mirrors.ustc.edu.cn/ubuntu-old-releases/ubuntu/ zesty-updates main universe 


</code></pre></div>

<p>参考：</p>
<blockquote>
  <blockquote>
    <p>![http://www.cnblogs.com/jiangz/p/4076811.html]http://www.cnblogs.com/jiangz/p/4076811.html</p>
  </blockquote>
</blockquote>


          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/21/old-ubuntu-distro-apt-update-fail">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Ubuntu，Gnome">
        <h3 class="title-meta">Tag "Ubuntu，Gnome":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme" title="Change Gnome Shell theme after ubuntu upgraded to 1710" rel="bookmark">Change Gnome Shell theme after ubuntu upgraded to 1710</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-29</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>由于Ubuntu非LTS版，官方维护周期为9个月，遂更新了Ubuntu从17.04到17.10。</p>

<p>然而更新之后Gnome的桌面管理器（GDM），主题被修改成了类Ubuntu风格橘红色。</p>

<p>这种奇葩的风格，也许只有Ubuntu的创始者们才喜欢吧。</p>

<p>最初想法是寻找到gnome-look上找到原版gdm主题，果然发现了很多好看的主题，类XP，类WIN789，类osx。但花虽美，却不是我想要的。</p>

<p>随着google一通之后，发现解决方案也简单，</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo update-alternatives --config gdm3.css
There are 2 choices <span class="k">for </span>the alternative gdm3.css <span class="o">(</span>providing /usr/share/gnome-shell/theme/gdm3.css<span class="o">)</span>.

  Selection    Path                                          Priority   Status
------------------------------------------------------------
<span class="k">*</span> 0            /usr/share/gnome-shell/theme/ubuntu.css        10        auto mode
  1            /usr/share/gnome-shell/theme/gnome-shell.css   5         manual mode
  2            /usr/share/gnome-shell/theme/ubuntu.css        10        manual mode

Press &lt;enter&gt; to keep the current choice[<span class="k">*</span><span class="o">]</span>, or <span class="nb">type </span>selection number:
</code></pre></div>

<p>GDM在<code class="highlighter-rouge">/etc/alternatives/</code>目录下有设置了一些可选项，其中就包括了控制gnome-shell主题的配置选项，而更新的Ubuntu只是新增了该选项，并增加了优先级。</p>

<p>如此，可以比较方便的通过<code class="highlighter-rouge">update-alternatives</code>命令来修改gdm主题了。</p>

<p>参考</p>

<blockquote>
  <p><a href="https://didrocks.fr/2017/09/11/ubuntu-gnome-shell-in-artful-day-11/">Ubuntu GNOME Shell in Artful: Day 11</a></p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="GDM">
        <h3 class="title-meta">Tag "GDM":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme" title="Change Gnome Shell theme after ubuntu upgraded to 1710" rel="bookmark">Change Gnome Shell theme after ubuntu upgraded to 1710</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-29</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>由于Ubuntu非LTS版，官方维护周期为9个月，遂更新了Ubuntu从17.04到17.10。</p>

<p>然而更新之后Gnome的桌面管理器（GDM），主题被修改成了类Ubuntu风格橘红色。</p>

<p>这种奇葩的风格，也许只有Ubuntu的创始者们才喜欢吧。</p>

<p>最初想法是寻找到gnome-look上找到原版gdm主题，果然发现了很多好看的主题，类XP，类WIN789，类osx。但花虽美，却不是我想要的。</p>

<p>随着google一通之后，发现解决方案也简单，</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo update-alternatives --config gdm3.css
There are 2 choices <span class="k">for </span>the alternative gdm3.css <span class="o">(</span>providing /usr/share/gnome-shell/theme/gdm3.css<span class="o">)</span>.

  Selection    Path                                          Priority   Status
------------------------------------------------------------
<span class="k">*</span> 0            /usr/share/gnome-shell/theme/ubuntu.css        10        auto mode
  1            /usr/share/gnome-shell/theme/gnome-shell.css   5         manual mode
  2            /usr/share/gnome-shell/theme/ubuntu.css        10        manual mode

Press &lt;enter&gt; to keep the current choice[<span class="k">*</span><span class="o">]</span>, or <span class="nb">type </span>selection number:
</code></pre></div>

<p>GDM在<code class="highlighter-rouge">/etc/alternatives/</code>目录下有设置了一些可选项，其中就包括了控制gnome-shell主题的配置选项，而更新的Ubuntu只是新增了该选项，并增加了优先级。</p>

<p>如此，可以比较方便的通过<code class="highlighter-rouge">update-alternatives</code>命令来修改gdm主题了。</p>

<p>参考</p>

<blockquote>
  <p><a href="https://didrocks.fr/2017/09/11/ubuntu-gnome-shell-in-artful-day-11/">Ubuntu GNOME Shell in Artful: Day 11</a></p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme">Read More</a>
    </div>
  </footer>
</article>


      
    
      <div class="box archive-meta" id="Theme">
        <h3 class="title-meta">Tag "Theme":</h3>
      </div>
      
        <!-- this is post list -->

    <!-- this is post list -->
<article class="post type-post status-publish format-standard">
    <header class="entry-header">
    <h2 class="entry-name">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme" title="Change Gnome Shell theme after ubuntu upgraded to 1710" rel="bookmark">Change Gnome Shell theme after ubuntu upgraded to 1710</a>
    </h2>
    <ul class="entry-meta">
      <li><i class="fa fa-clock-o"></i> 最后编辑 2018-01-29</li>
      <li><i class="fa fa-pencil-square-o"></i>
          
            <a href="https://mypre.cn/categories/Linux">Linux</a>
          
      </li>
      <li><i class="fa fa-comments-o"></i> <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme#post-comment"><span class="disqus-comment-count" data-disqus-url="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme"></span><span lang="join-count"   class="join-count"   data-url=""   data-sourceId=""></span> 评论</a></li>
      <!-- <li><i class="fa fa-eye"></i> <?php mzw_post_views(' Views');?></li> -->
    </ul>
    </header>
    <div class="entry-content" itemprop="description">
          
              <p>由于Ubuntu非LTS版，官方维护周期为9个月，遂更新了Ubuntu从17.04到17.10。</p>

<p>然而更新之后Gnome的桌面管理器（GDM），主题被修改成了类Ubuntu风格橘红色。</p>

<p>这种奇葩的风格，也许只有Ubuntu的创始者们才喜欢吧。</p>

<p>最初想法是寻找到gnome-look上找到原版gdm主题，果然发现了很多好看的主题，类XP，类WIN789，类osx。但花虽美，却不是我想要的。</p>

<p>随着google一通之后，发现解决方案也简单，</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo update-alternatives --config gdm3.css
There are 2 choices <span class="k">for </span>the alternative gdm3.css <span class="o">(</span>providing /usr/share/gnome-shell/theme/gdm3.css<span class="o">)</span>.

  Selection    Path                                          Priority   Status
------------------------------------------------------------
<span class="k">*</span> 0            /usr/share/gnome-shell/theme/ubuntu.css        10        auto mode
  1            /usr/share/gnome-shell/theme/gnome-shell.css   5         manual mode
  2            /usr/share/gnome-shell/theme/ubuntu.css        10        manual mode

Press &lt;enter&gt; to keep the current choice[<span class="k">*</span><span class="o">]</span>, or <span class="nb">type </span>selection number:
</code></pre></div>

<p>GDM在<code class="highlighter-rouge">/etc/alternatives/</code>目录下有设置了一些可选项，其中就包括了控制gnome-shell主题的配置选项，而更新的Ubuntu只是新增了该选项，并增加了优先级。</p>

<p>如此，可以比较方便的通过<code class="highlighter-rouge">update-alternatives</code>命令来修改gdm主题了。</p>

<p>参考</p>

<blockquote>
  <p><a href="https://didrocks.fr/2017/09/11/ubuntu-gnome-shell-in-artful-day-11/">Ubuntu GNOME Shell in Artful: Day 11</a></p>
</blockquote>

          
    </div>
    <footer class="entry-footer clearfix">
    <div class="post-love">
      <a href="javascript:;" data-action="ding" class="favorite post-love-link" title="Love this"><i class="fa fa-heart-o"></i> 
      <span class="love-count">
        0
      </span></a>
    </div>
    <div class="post-more">
      <a href="https://mypre.cn/2018/01/29/ubuntu-1710-change-gdm-theme">Read More</a>
    </div>
  </footer>
</article>


      
    

</div>
<div id="sidebar">
    <!-- sidebar: tag list -->
<aside id="mzw_siderbar_tags-3" class="widget widget_mzw_siderbar_tags">
    <h3 class="widget-title"><hanla></hanla><span>标签云</span></h3>
    <div class="tagcloud">
        <!-- <a href="http://lbing.sinaapp.com/archives/tag/%e6%a0%87%e7%ad%be1">标签<hanla></hanla>1</a> -->
        
            <a class="taglink" href="https://mypre.cn/tag/#test" data-target-cate="#test">
                test
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#标签1" data-target-cate="#标签1">
                标签1
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#jekyll" data-target-cate="#jekyll">
                jekyll
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MyPress" data-target-cate="#MyPress">
                MyPress
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Mypre.cn" data-target-cate="#Mypre.cn">
                Mypre.cn
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#iziy" data-target-cate="#iziy">
                iziy
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#nautilus" data-target-cate="#nautilus">
                nautilus
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#机械键盘，背光，Scroll开关，" data-target-cate="#机械键盘，背光，Scroll开关，">
                机械键盘，背光，Scroll开关，
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#心情日记，生活随笔" data-target-cate="#心情日记，生活随笔">
                心情日记，生活随笔
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#grub，os-prober" data-target-cate="#grub，os-prober">
                grub，os-prober
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#windows" data-target-cate="#windows">
                windows
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux系统" data-target-cate="#Linux系统">
                Linux系统
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Fedora" data-target-cate="#Fedora">
                Fedora
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#心情日记，考研心得" data-target-cate="#心情日记，考研心得">
                心情日记，考研心得
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#数据结构算法，动态规划" data-target-cate="#数据结构算法，动态规划">
                数据结构算法，动态规划
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Android第三方ROM二次开发重新打包" data-target-cate="#Android第三方ROM二次开发重新打包">
                Android第三方ROM二次开发重新打包
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux，DWM" data-target-cate="#Linux，DWM">
                Linux，DWM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux，GTK Theme" data-target-cate="#Linux，GTK Theme">
                Linux，GTK Theme
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#客制化机械键盘" data-target-cate="#客制化机械键盘">
                客制化机械键盘
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#机械键盘主控器" data-target-cate="#机械键盘主控器">
                机械键盘主控器
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#更新ibus输入法词库" data-target-cate="#更新ibus输入法词库">
                更新ibus输入法词库
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MCU，MSP432，GPIO" data-target-cate="#MCU，MSP432，GPIO">
                MCU，MSP432，GPIO
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MCU" data-target-cate="#MCU">
                MCU
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#MSP432" data-target-cate="#MSP432">
                MSP432
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Timer_A" data-target-cate="#Timer_A">
                Timer_A
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#PWM" data-target-cate="#PWM">
                PWM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#UART" data-target-cate="#UART">
                UART
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#串口通信" data-target-cate="#串口通信">
                串口通信
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Graphic" data-target-cate="#Graphic">
                Graphic
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#library" data-target-cate="#library">
                library
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#grlib" data-target-cate="#grlib">
                grlib
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#ECNU" data-target-cate="#ECNU">
                ECNU
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#CTF" data-target-cate="#CTF">
                CTF
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#逆向" data-target-cate="#逆向">
                逆向
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#ArchLinux" data-target-cate="#ArchLinux">
                ArchLinux
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#BIT" data-target-cate="#BIT">
                BIT
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Reverse" data-target-cate="#Reverse">
                Reverse
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Linux" data-target-cate="#Linux">
                Linux
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Ubuntu" data-target-cate="#Ubuntu">
                Ubuntu
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#zesty" data-target-cate="#zesty">
                zesty
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#apt" data-target-cate="#apt">
                apt
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#release" data-target-cate="#release">
                release
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Ubuntu，Gnome" data-target-cate="#Ubuntu，Gnome">
                Ubuntu，Gnome
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#GDM" data-target-cate="#GDM">
                GDM
            </a>
        
            <a class="taglink" href="https://mypre.cn/tag/#Theme" data-target-cate="#Theme">
                Theme
            </a>
        
    </div>
</aside>
</div>
      </div><!-- ./container -->

    <footer id="footer" class="yahei clearfix">
	<p class="right">Copyright © 2014 <a href="https://mypre.cn" >IzIy's Files - MyPress - MyPre.Cn</a> Powered By <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
	<p class="left"></p>
</footer>
  </div><!--./warp-->

  <img id="qrimg" src="http://qr.liantu.com/api.php?text=https://mypre.cn/tag/"/>
  <a id="qr" href="javascript:;"><i class="fa fa-qrcode"></i></a>
  <a id="gotop" href="javascript:;"><i class="fa fa-arrow-up"></i></a>
  <!--the js include-->
<!-- <script src="/assets/vendor/jquery/jquery.min.js"></script>
 -->


<script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="https://lib.sinaapp.com/js/jquery.migrate/1.2.1/jquery-migrate-1.2.1.min.js"></script>
<script src="https://cdn.staticfile.org/flexslider/2.2.0/jquery.flexslider-min.js"></script>

<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="/assets/script/slimbox2.min.js"></script>
<script src="/assets/script/jquery.jplayer.min.js"></script>
<script src="/assets/script/prettify.js"></script>

<script type="text/javascript">
	var ajax = {
		'home': 'https://mypre.cn'
	}
	var asr_1 = 1;
	var asr_2 = 2;

/*
	$('.entry-content pre').addClass('prettyprint linenums');
	$('.entry-content code').addClass('prettyprint');
	prettyPrint();*/

</script>

<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


<script src="/assets/script/global.js"></script>
<script src="/assets/script/ajax.js"></script>



<!--
  the site comment script
-->





  <script src="/assets/script/commento.js"></script>
<script>
window.onload = function() {
    Commento.init({
        //serverUrl: "http://free_comment.mypre.cn",
        serverUrl: "http://free_comment.mypre.cn"
    });
}
</script>



<!--
  the site analysis script
-->

  <!-- baidu analysis -->
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?c18ce105288bdc61337b1ff23ee5cf52";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>




</body>
</html>
